
        <h2 id="t01. 服务器部署步骤">1. 服务器部署步骤 <a href="#t01. 服务器部署步骤"> # </a></h2>
<ol>
<li>购买自己的域名</li>
<li>域名备案</li>
<li>购买服务器</li>
<li>配置服务器应用环境</li>
<li>安装配置服务器</li>
<li>项目远程部署和发布与更新</li>
</ol>
<h3 id="t11.2 购买域名">1.2 购买域名 <a href="#t11.2 购买域名"> # </a></h3>
<ul>
<li><a href="https://dnspod.cloud.tencent.com/">腾讯云</a></li>
<li><a href="https://wanwang.aliyun.com/">阿里云</a></li>
<li><a href="https://cloud.baidu.com/product/bcd.html">百度云</a></li>
<li><a href="https://www.22.cn/">爱名网</a></li>
<li><a href="https://sg.godaddy.com/">godaddy</a></li>
</ul>
<h3 id="t21.3 云主机">1.3 云主机 <a href="#t21.3 云主机"> # </a></h3>
<ul>
<li><a href="https://www.aliyun.com/">阿里云 ECS</a></li>
<li><a href="https://aws.amazon.com/cn/">亚马逊 AWS</a></li>
<li><a href="https://cloud.baidu.com/">百度云</a></li>
</ul>
<h3 id="t31.4 购买阿里云">1.4 购买阿里云 <a href="#t31.4 购买阿里云"> # </a></h3>
<ul>
<li><a href="https://ecs-buy.aliyun.com/wizard/#/postpay/cn-beijing">选择配置</a></li>
<li>镜像 Ubuntu 16.04 64 位</li>
</ul>
<h3 id="t41.5 备案">1.5 备案 <a href="#t41.5 备案"> # </a></h3>
<ul>
<li><a href="https://beian.aliyun.com">阿里云备案</a></li>
<li><a href="https://bsn.console.aliyun.com/#/bsnManagement">备案服务号管理</a></li>
</ul>
<h2 id="t52 安装软件">2 安装软件 <a href="#t52 安装软件"> # </a></h2>
<h3 id="t62.1 连接服务器">2.1 连接服务器 <a href="#t62.1 连接服务器"> # </a></h3>
<pre><code class="lang-js">ssh root@<span class="hljs-number">47.92</span><span class="hljs-number">.243</span><span class="hljs-number">.226</span>
</code></pre>
<h3 id="t72.2 升级系统">2.2 升级系统 <a href="#t72.2 升级系统"> # </a></h3>
<pre><code class="lang-js">apt-<span class="hljs-keyword">get</span> update
apt-<span class="hljs-keyword">get</span> upgrade
</code></pre>
<h3 id="t82.3 安装工具包">2.3 安装工具包 <a href="#t82.3 安装工具包"> # </a></h3>
<pre><code class="lang-js">apt-<span class="hljs-keyword">get</span> install wget curl git
</code></pre>
<h3 id="t92.4 安装 node">2.4 安装 node <a href="#t92.4 安装 node"> # </a></h3>
<ul>
<li>使用<a href="https://github.com/creationix/nvm/blob/master/README.md">nvm</a>安装 node</li>
</ul>
<pre><code class="lang-js">wget -qO- https:<span class="hljs-comment">//raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash</span>
source  /root/.bashrc
nvm install stable
node -v
npm i cnpm -g
npm i nrm -g
</code></pre>
<h3 id="t102.5 nginx">2.5 nginx <a href="#t102.5 nginx"> # </a></h3>
<p>Nginx 是一个高性能的 HTTP 和反向代理服务器</p>
<h4 id="t112.5.1 安装">2.5.1 安装 <a href="#t112.5.1 安装"> # </a></h4>
<pre><code class="lang-js">apt-<span class="hljs-keyword">get</span> install nginx
</code></pre>
<h4 id="t122.5.2 nginx 命令">2.5.2 nginx 命令 <a href="#t122.5.2 nginx 命令"> # </a></h4>
<table>
<thead>
<tr>
<th style="text-align:left">名称</th>
<th style="text-align:left">命令</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">启动 nginx</td>
<td style="text-align:left">nginx -c /etc/nginx/nginx.conf</td>
</tr>
<tr>
<td style="text-align:left">关闭 nginx</td>
<td style="text-align:left">nginx -s stop</td>
</tr>
<tr>
<td style="text-align:left">重读配置文件</td>
<td style="text-align:left">nginx -s reload kill -HUP nginx</td>
</tr>
<tr>
<td style="text-align:left">常用命令</td>
<td style="text-align:left">service nginx {start</td>
<td>stop</td>
<td>status</td>
<td>restart</td>
<td>reload</td>
<td>configtest</td>
<td>}</td>
</tr>
</tbody>
</table>
<h3 id="t132.6 mysql">2.6 mysql <a href="#t132.6 mysql"> # </a></h3>
<p>安装 mysql</p>
<pre><code class="lang-js">apt install mysql-server -y
apt install mysql-client
apt install libmysqlclient-dev
</code></pre>
<ul>
<li><a href="https://www.cnblogs.com/roadofstudy/p/7446690.html">root 用户重置密码问题</a></li>
</ul>
<h2 id="t143. 部署项目">3. 部署项目 <a href="#t143. 部署项目"> # </a></h2>
<h3 id="t153.1 部署后端项目">3.1 部署后端项目 <a href="#t153.1 部署后端项目"> # </a></h3>
<pre><code class="lang-js">git clone https:<span class="hljs-comment">//gitee.com/zhufengpeixun/2018projects1.git</span>
cd <span class="hljs-number">2018</span>projects1/zhufeng-cms
yarn

wget http:<span class="hljs-comment">//7xil5b.com1.z0.glb.clouddn.com/zhufeng-cms.sql</span>
mysql -uroot -proot
CREATE DATABASE IF NOT EXISTS zhufengcms <span class="hljs-keyword">default</span> charset utf8 COLLATE utf8_general_ci;
use zhufengcms;
source zhufengcms.sql;
yarn start
</code></pre>
<h3 id="t163.2 部署前端项目">3.2 部署前端项目 <a href="#t163.2 部署前端项目"> # </a></h3>
<pre><code class="lang-sql">cd 2018projects1/zhufeng-cms-front
yarn
yarn build

</code></pre>
<p>/etc/nginx/nginx.conf</p>
<pre><code class="lang-js">include /etc/nginx/conf.d<span class="hljs-comment">/*.conf;
include /etc/nginx/sites-enabled/*;
</span></code></pre>
<p>include /etc/nginx/sites-enabled/default</p>
<pre><code class="lang-js">root /<span class="hljs-keyword">var</span>/www/html;
</code></pre>
<pre><code>scp 1.txt root@47.92.243.226:/root

server {
    listen 80;
    server_name 47.92.243.226;

    root /var/www/html;

    location / {
        try_files $uri $uri/ @router;
        index index.html;
    }

        location /api {
                rewrite ^/api/(.*)$ /$1 break;
                proxy_pass http://127.0.0.1:7001;
        }

        location @router {
               rewrite ^.*$ /index.html break;
        }


}
</code></pre><h2 id="t17参考">参考 <a href="#t17参考"> # </a></h2>
<ul>
<li><a href="https://yarn.bootcss.com/docs/usage/">yarn</a></li>
<li><a href="https://eggjs.org/zh-cn/core/deployment.html">deployment</a></li>
<li><a href="https://umijs.org/zh/guide/deploy.html">deploy</a></li>
</ul>

    