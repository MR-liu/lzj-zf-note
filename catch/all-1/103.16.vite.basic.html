
        <h2 id="t01.Vite">1.Vite <a href="#t01.Vite"> # </a></h2>
<ul>
<li><a href="https://cn.vitejs.dev/">Vite (æ³•è¯­æ„ä¸º "å¿«é€Ÿçš„"ï¼Œå‘éŸ³ /vit/) </a>æ˜¯ä¸‹ä¸€ä»£å‰ç«¯å¼€å‘ä¸æ„å»ºå·¥å…·</li>
<li>ğŸ’¡ æé€Ÿçš„æœåŠ¡å¯åŠ¨ ä½¿ç”¨åŸç”Ÿ ESM æ–‡ä»¶ï¼Œæ— éœ€æ‰“åŒ…!</li>
<li>âš¡ï¸ è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ æ— è®ºåº”ç”¨ç¨‹åºå¤§å°å¦‚ä½•ï¼Œéƒ½å§‹ç»ˆæå¿«çš„æ¨¡å—çƒ­é‡è½½ï¼ˆHMRï¼‰</li>
<li>ğŸ› ï¸ ä¸°å¯Œçš„åŠŸèƒ½ å¯¹ TypeScriptã€JSXã€CSS ç­‰æ”¯æŒå¼€ç®±å³ç”¨ã€‚</li>
<li>ğŸ“¦ ä¼˜åŒ–çš„æ„å»º å¯é€‰ â€œå¤šé¡µåº”ç”¨â€ æˆ– â€œåº“â€ æ¨¡å¼çš„é¢„é…ç½® Rollup æ„å»º</li>
<li>ğŸ”© é€šç”¨çš„æ’ä»¶ åœ¨å¼€å‘å’Œæ„å»ºä¹‹é—´å…±äº« Rollup-superset æ’ä»¶æ¥å£ã€‚</li>
<li>ğŸ”‘ å®Œå…¨ç±»å‹åŒ–çš„API çµæ´»çš„ API å’Œå®Œæ•´ TypeS</li>
</ul>
<h2 id="t12.é…ç½®å¼€å‘ç¯å¢ƒ">2.é…ç½®å¼€å‘ç¯å¢ƒ <a href="#t12.é…ç½®å¼€å‘ç¯å¢ƒ"> # </a></h2>
<ul>
<li><a href="https://github.com/vuejs/rfcs/blob/master/active-rfcs/0040-script-setup.md">script-setup</a></li>
</ul>
<h3 id="t22.1 å®‰è£…ä¾èµ–">2.1 å®‰è£…ä¾èµ– <a href="#t22.1 å®‰è£…ä¾èµ–"> # </a></h3>
<pre><code class="lang-js">npm install vue  --save
npm install  @vitejs/plugin-vue @vue/compiler-sfc vite --save-dev
</code></pre>
<h3 id="t32.2 é…ç½®æ–‡ä»¶">2.2 é…ç½®æ–‡ä»¶ <a href="#t32.2 é…ç½®æ–‡ä»¶"> # </a></h3>
<p>vite.config.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>
<span class="hljs-comment">// https://vitejs.dev/config/</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> defineConfig({
  <span class="hljs-attr">plugins</span>: [vue()]
})
</code></pre>
<h3 id="t42.3 package.json">2.3 package.json <a href="#t42.3 package.json"> # </a></h3>
<p>package.json</p>
<pre><code class="lang-json">{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"vite2-prepare"</span>,
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
  <span class="hljs-attr">"scripts"</span>: {
    <span class="hljs-attr">"dev"</span>: <span class="hljs-string">"vite"</span>,
    <span class="hljs-attr">"build"</span>: <span class="hljs-string">"vite build"</span>,
    <span class="hljs-attr">"serve"</span>: <span class="hljs-string">"vite preview"</span>
  },
  <span class="hljs-attr">"dependencies"</span>: {
    <span class="hljs-attr">"vue"</span>: <span class="hljs-string">"^3.0.5"</span>
  },
  <span class="hljs-attr">"devDependencies"</span>: {
    <span class="hljs-attr">"@vitejs/plugin-vue"</span>: <span class="hljs-string">"^1.2.4"</span>,
    <span class="hljs-attr">"@vue/compiler-sfc"</span>: <span class="hljs-string">"^3.0.5"</span>,
    <span class="hljs-attr">"vite"</span>: <span class="hljs-string">"^2.4.0"</span>
  }
}
</code></pre>
<h3 id="t52.4 index.html">2.4 index.html <a href="#t52.4 index.html"> # </a></h3>
<p>index.html</p>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"icon"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/favicon.ico"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Vite App<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/src/main.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>

</code></pre>
<h3 id="t62.5 src\main.js">2.5 src\main.js <a href="#t62.5 src\main.js"> # </a></h3>
<p>src\main.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>
createApp(App).mount(<span class="hljs-string">'#app'</span>)
</code></pre>
<h3 id="t72.6 src\App.vue">2.6 src\App.vue <a href="#t72.6 src\App.vue"> # </a></h3>
<p>src\App.vue</p>
<pre><code class="lang-js">&lt;template&gt;
  &lt;img src="./assets/ico.jpg" /&gt;
  &lt;HelloWorld msg="Vue3 + Vite" /&gt;
&lt;/template&gt;

&lt;script setup&gt;
//https://github.com/vuejs/rfcs/blob/master/active-rfcs/0040-script-setup.md
import HelloWorld from './components/HelloWorld.vue'
&lt;/script&gt;
</code></pre>
<h3 id="t82.7 HelloWorld.vue">2.7 HelloWorld.vue <a href="#t82.7 HelloWorld.vue"> # </a></h3>
<p>src\components\HelloWorld.vue</p>
<pre><code class="lang-js">&lt;template&gt;
  &lt;h1&gt;{{ msg }}&lt;/h1&gt;
&lt;/template&gt;
</code></pre>
<h2 id="t93.é™æ€èµ„æºå¤„ç†">3.é™æ€èµ„æºå¤„ç† <a href="#t93.é™æ€èµ„æºå¤„ç†"> # </a></h2>
<ul>
<li><a href="https://cn.vitejs.dev/guide/assets.html">é™æ€èµ„æºå¤„ç†</a></li>
<li>æœåŠ¡æ—¶å¼•å…¥ä¸€ä¸ªé™æ€èµ„æºä¼šè¿”å›è§£æåçš„å…¬å…±è·¯å¾„</li>
</ul>
<h3 id="t103.1 æ¨¡æ¿ä¸­å¼•å…¥">3.1 æ¨¡æ¿ä¸­å¼•å…¥ <a href="#t103.1 æ¨¡æ¿ä¸­å¼•å…¥"> # </a></h3>
<p>src\App.vue</p>
<pre><code class="lang-diff">&lt;template&gt;
<span class="hljs-addition">+  &lt;img  src="./assets/avatar.jpg" /&gt;</span>
&lt;/template&gt;
</code></pre>
<h3 id="t113.2 JSä¸­å¼•å…¥">3.2 JSä¸­å¼•å…¥ <a href="#t113.2 JSä¸­å¼•å…¥"> # </a></h3>
<pre><code class="lang-diff">&lt;template&gt;
  &lt;img  src="./assets/avatar.jpg" /&gt;
<span class="hljs-addition">+  &lt;img  :src="imgUrl" /&gt;</span>
  &lt;HelloWorld msg="Hello Vue 3 + Vite" /&gt;
&lt;/template&gt;

&lt;script setup&gt;
//https://github.com/vuejs/rfcs/blob/master/active-rfcs/0040-script-setup.md
import HelloWorld from './components/HelloWorld.vue'
<span class="hljs-addition">+import imgUrl from './assets/avatar.jpg'</span>
&lt;/script&gt;
</code></pre>
<h3 id="t123.3 CSSä¸­å¼•å…¥">3.3 CSSä¸­å¼•å…¥ <a href="#t123.3 CSSä¸­å¼•å…¥"> # </a></h3>
<pre><code class="lang-diff">&lt;template&gt;
  &lt;img  src="./assets/avatar.jpg" /&gt;
  &lt;img  :src="imgUrl" /&gt;
<span class="hljs-addition">+ &lt;div class="avatar"&gt;&lt;/div&gt;</span>
  &lt;HelloWorld msg="Hello Vue 3 + Vite" /&gt;
&lt;/template&gt;

&lt;script setup&gt;
//https://github.com/vuejs/rfcs/blob/master/active-rfcs/0040-script-setup.md
import HelloWorld from './components/HelloWorld.vue'
import imgUrl from './assets/avatar.jpg'
&lt;/script&gt;
<span class="hljs-addition">+&lt;style scoped&gt;</span>
<span class="hljs-addition">+.avatar{</span>
<span class="hljs-addition">+  width:200px;</span>
<span class="hljs-addition">+  height:200px;</span>
<span class="hljs-addition">+  background-image: url(./assets/avatar.jpg);</span>
<span class="hljs-addition">+  background-size: contain;</span>
<span class="hljs-addition">+}</span>
<span class="hljs-addition">+&lt;/style&gt;</span>
</code></pre>
<h3 id="t133.4 publicç›®å½•">3.4 publicç›®å½• <a href="#t133.4 publicç›®å½•"> # </a></h3>
<ul>
<li><a href="https://cn.vitejs.dev/guide/assets.html#the-public-directory">publicç›®å½•</a></li>
<li>å¦‚æœæœ‰ä»¥ä¸‹éœ€æ±‚<ul>
<li>è¿™äº›èµ„æºä¸ä¼šè¢«æºç å¼•ç”¨ï¼ˆä¾‹å¦‚ robots.txtï¼‰</li>
<li>è¿™äº›èµ„æºå¿…é¡»ä¿æŒåŸæœ‰æ–‡ä»¶åï¼ˆæ²¡æœ‰ç»è¿‡ hashï¼‰</li>
</ul>
</li>
<li>é‚£ä¹ˆä½ å¯ä»¥å°†è¯¥èµ„æºæ”¾åœ¨æŒ‡å®šçš„ <code>public</code> ç›®å½•ä¸­ï¼Œå®ƒåº”ä½äºä½ çš„é¡¹ç›®æ ¹ç›®å½•</li>
<li>è¯¥ç›®å½•ä¸­çš„èµ„æºåœ¨å¼€å‘æ—¶èƒ½ç›´æ¥é€šè¿‡ <code>/</code> æ ¹è·¯å¾„è®¿é—®åˆ°ï¼Œå¹¶ä¸”æ‰“åŒ…æ—¶ä¼šè¢«å®Œæ•´å¤åˆ¶åˆ°ç›®æ ‡ç›®å½•çš„æ ¹ç›®å½•ä¸‹</li>
</ul>
<p><code>public\avatar.jpg</code></p>
<h2 id="t144.é…ç½®åˆ«å">4.é…ç½®åˆ«å <a href="#t144.é…ç½®åˆ«å"> # </a></h2>
<h3 id="t154.1 vite.config.js">4.1 vite.config.js <a href="#t154.1 vite.config.js"> # </a></h3>
<pre><code class="lang-diff">import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
<span class="hljs-addition">+import {resolve} from 'path';</span>

// https://vitejs.dev/config/
export default defineConfig({
<span class="hljs-addition">+ resolve:{</span>
<span class="hljs-addition">+   alias:{</span>
<span class="hljs-addition">+    '@':resolve('src')</span>
<span class="hljs-addition">+   }</span>
<span class="hljs-addition">+ },</span>
  plugins: [vue()]
})
</code></pre>
<h3 id="t164.2 App.vue">4.2 App.vue <a href="#t164.2 App.vue"> # </a></h3>
<p>src\App.vue</p>
<pre><code class="lang-diff">&lt;template&gt;
<span class="hljs-addition">+ &lt;img src="@/assets/avatar.jpg" /&gt;</span>
  &lt;img :src="avatarUrl" /&gt;
  &lt;div class="avatar"&gt;&lt;/div&gt;
  &lt;HelloWorld msg="Hello Vue 3 + Vite" /&gt;
&lt;/template&gt;
&lt;script setup&gt;
//https://github.com/vuejs/rfcs/blob/master/active-rfcs/0040-script-setup.md
<span class="hljs-addition">+import HelloWorld from "@/components/HelloWorld.vue";</span>
<span class="hljs-addition">+import avatarUrl from "@/assets/avatar.jpg";</span>
&lt;/script&gt;
&lt;style scoped&gt;
.avatar {
  width: 200px;
  height: 200px;
<span class="hljs-addition">+ background-image: url(@/assets/avatar.jpg);</span>
  background-size: contain;
}
&lt;/style&gt;
</code></pre>
<h2 id="t175.æ ·å¼å¤„ç†">5.æ ·å¼å¤„ç† <a href="#t175.æ ·å¼å¤„ç†"> # </a></h2>
<h3 id="t185.1 å…¨å±€æ ·å¼">5.1 å…¨å±€æ ·å¼ <a href="#t185.1 å…¨å±€æ ·å¼"> # </a></h3>
<p>src\main.js</p>
<pre><code class="lang-diff">import { createApp } from 'vue'
import App from './App.vue'
<span class="hljs-addition">+import './global.css'</span>
createApp(App).mount('#app')
</code></pre>
<p>src\global.css</p>
<pre><code class="lang-css"><span class="hljs-selector-id">#app</span> {
    <span class="hljs-attribute">background-color</span>: lightgrey;
}
</code></pre>
<h3 id="t195.2 å±€éƒ¨æ ·å¼">5.2 å±€éƒ¨æ ·å¼ <a href="#t195.2 å±€éƒ¨æ ·å¼"> # </a></h3>
<h3 id="t205.2.1 scoped">5.2.1 scoped <a href="#t205.2.1 scoped"> # </a></h3>
<ul>
<li>å½“ <code>&lt;style&gt;</code> æ ‡ç­¾æœ‰ <code>scoped</code> å±æ€§æ—¶ï¼Œå®ƒçš„ CSS åªä½œç”¨äºå½“å‰ç»„ä»¶ä¸­çš„å…ƒç´ </li>
<li>å®ƒä½¿ç”¨äº†<code>data-v-hash</code>çš„æ–¹å¼æ¥ä½¿cssæœ‰äº†å®ƒå¯¹åº”æ¨¡å—çš„æ ‡è¯†</li>
</ul>
<p>src\components\HelloWorld.vue</p>
<pre><code class="lang-diff">&lt;template&gt;
  &lt;h1&gt;{{ msg }}&lt;/h1&gt;
<span class="hljs-addition">+  &lt;a&gt;è¶…é“¾æ¥&lt;/a&gt;</span>
&lt;/template&gt;
<span class="hljs-addition">+&lt;style scoped&gt;</span>
<span class="hljs-addition">+a {</span>
<span class="hljs-addition">+  color: #42b983;</span>
<span class="hljs-addition">+}</span>
<span class="hljs-addition">+&lt;/style&gt;</span>
</code></pre>
<h3 id="t215.2.2 CSS Modules">5.2.2 CSS Modules <a href="#t215.2.2 CSS Modules"> # </a></h3>
<ul>
<li><a href="https://cn.vitejs.dev/guide/features.html#postcss">CSS Modules</a></li>
<li>é€šè¿‡<code>module</code>ä½œç”¨çš„<code>style</code>éƒ½è¢«ä¿å­˜åˆ°<code>$style</code>å¯¹è±¡ä¸­</li>
</ul>
<h3 id="t225.2.2.1  å†…è”">5.2.2.1  å†…è” <a href="#t225.2.2.1  å†…è”"> # </a></h3>
<p>src\components\HelloWorld.vue</p>
<pre><code class="lang-diff">&lt;template&gt;
  &lt;h1&gt;{{ msg }}&lt;/h1&gt;
<span class="hljs-addition">+ &lt;a :class="$style.link"&gt;è¶…é“¾æ¥&lt;/a&gt;</span>
&lt;/template&gt;
<span class="hljs-addition">+&lt;style module&gt;</span>
<span class="hljs-addition">+.link {</span>
<span class="hljs-addition">+  color: #42b983;</span>
<span class="hljs-addition">+}</span>
<span class="hljs-addition">+&lt;/style&gt;</span>
</code></pre>
<h3 id="t235.2.2.2  å¤–è”">5.2.2.2  å¤–è” <a href="#t235.2.2.2  å¤–è”"> # </a></h3>
<ul>
<li>ä»»ä½•ä»¥ .module.css ä¸ºåç¼€åçš„ CSS æ–‡ä»¶éƒ½è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ª CSS modules æ–‡ä»¶</li>
<li>å¯¼å…¥è¿™æ ·çš„æ–‡ä»¶ä¼šè¿”å›ä¸€ä¸ªç›¸åº”çš„æ¨¡å—å¯¹è±¡
src\components\HelloWorld.vue</li>
</ul>
<pre><code class="lang-diff">&lt;template&gt;
  &lt;h1&gt;{{ msg }}&lt;/h1&gt;
<span class="hljs-addition">+ &lt;a :class="style.link"&gt;è¶…é“¾æ¥&lt;/a&gt;</span>
&lt;/template&gt;

&lt;script setup&gt;
<span class="hljs-addition">+import style from './HelloWorld.module.css';</span>
&lt;/script&gt;
</code></pre>
<p>src\components\HelloWorld.module.css</p>
<pre><code class="lang-js">.link {
    color: #42b983;
}
</code></pre>
<h3 id="t245.3 lesså’Œsass">5.3 lesså’Œsass <a href="#t245.3 lesså’Œsass"> # </a></h3>
<ul>
<li>Vite ä¹ŸåŒæ—¶æä¾›äº†å¯¹ .scss, .sass, .less, .styl å’Œ .stylus æ–‡ä»¶çš„å†…ç½®æ”¯æŒã€‚æ²¡æœ‰å¿…è¦ä¸ºå®ƒä»¬å®‰è£…ç‰¹å®šçš„ Vite æ’ä»¶ï¼Œä½†å¿…é¡»å®‰è£…ç›¸åº”çš„é¢„å¤„ç†å™¨ä¾èµ–</li>
<li>å¦‚æœæ˜¯ç”¨çš„æ˜¯å•æ–‡ä»¶ç»„ä»¶ï¼Œå¯ä»¥é€šè¿‡ <code>style lang="sass"</code>ï¼ˆæˆ–å…¶ä»–é¢„å¤„ç†å™¨ï¼‰è‡ªåŠ¨å¼€å¯</li>
</ul>
<h4 id="t255.3.1 å®‰è£…">5.3.1 å®‰è£… <a href="#t255.3.1 å®‰è£…"> # </a></h4>
<pre><code class="lang-js">npm i less sass -S
</code></pre>
<h4 id="t265.3.2 HelloWorld.vue">5.3.2 HelloWorld.vue <a href="#t265.3.2 HelloWorld.vue"> # </a></h4>
<p>src\components\HelloWorld.vue</p>
<pre><code class="lang-diff">&lt;template&gt;
  &lt;h1&gt;{{ msg }}&lt;/h1&gt;
  &lt;a :class="style.link"&gt;è¶…é“¾æ¥&lt;/a&gt;
<span class="hljs-addition">+ &lt;h2&gt;less&lt;/h2&gt;</span>
<span class="hljs-addition">+ &lt;h3&gt;sass&lt;/h3&gt;</span>
&lt;/template&gt;

&lt;script setup&gt;
import { reactive } from 'vue'
import style from './HelloWorld.module.css';
&lt;/script&gt;
<span class="hljs-addition">+&lt;style scoped lang="less"&gt;</span>
<span class="hljs-addition">+@color:red;</span>
<span class="hljs-addition">+h2{</span>
<span class="hljs-addition">+  color:@color;</span>
<span class="hljs-addition">+}</span>
<span class="hljs-addition">+&lt;/style&gt;</span>
<span class="hljs-addition">+&lt;style scoped lang="scss"&gt;</span>
<span class="hljs-addition">+$color:green;</span>
<span class="hljs-addition">+h3{</span>
<span class="hljs-addition">+  color:$color;</span>
<span class="hljs-addition">+}</span>
&lt;/style&gt;
</code></pre>
<h3 id="t275.4 PostCSS">5.4 PostCSS <a href="#t275.4 PostCSS"> # </a></h3>
<ul>
<li><a href="https://cn.vitejs.dev/guide/features.html#postcss">postcss</a></li>
<li>å¦‚æœé¡¹ç›®åŒ…å«æœ‰æ•ˆçš„ PostCSS é…ç½® (ä»»ä½•å— postcss-load-config æ”¯æŒçš„æ ¼å¼ï¼Œä¾‹å¦‚ postcss.config.js)ï¼Œå®ƒå°†ä¼šè‡ªåŠ¨åº”ç”¨äºæ‰€æœ‰å·²å¯¼å…¥çš„ CSS</li>
</ul>
<h4 id="t285.4.1 å®‰è£…">5.4.1 å®‰è£… <a href="#t285.4.1 å®‰è£…"> # </a></h4>
<pre><code class="lang-js">npm install autoprefixer --save
</code></pre>
<h4 id="t295.4.2 postcss.config.js">5.4.2 postcss.config.js <a href="#t295.4.2 postcss.config.js"> # </a></h4>
<pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">plugins</span>: [
      <span class="hljs-built_in">require</span>(<span class="hljs-string">'autoprefixer'</span>)
  ]
}
</code></pre>
<h4 id="t305.4.3 .browserslistrc">5.4.3 .browserslistrc <a href="#t305.4.3 .browserslistrc"> # </a></h4>
<pre><code class="lang-js">&gt;<span class="hljs-number">0.2</span>%
not dead
not op_mini all
</code></pre>
<h4 id="t315.4.4 HelloWorld.vue">5.4.4 HelloWorld.vue <a href="#t315.4.4 HelloWorld.vue"> # </a></h4>
<p>src\components\HelloWorld.vue</p>
<pre><code class="lang-diff">&lt;template&gt;
  &lt;h1&gt;{{ msg }}&lt;/h1&gt;
  &lt;a :class="style.link"&gt;è¶…é“¾æ¥&lt;/a&gt;
  &lt;h2&gt;less&lt;/h2&gt;
  &lt;h3&gt;sass&lt;/h3&gt;
<span class="hljs-addition">+ &lt;div class="postcss"&gt;&lt;/div&gt;</span>
&lt;/template&gt;

&lt;script setup&gt;
import { reactive } from 'vue'
import style from './HelloWorld.module.css';
&lt;/script&gt;
&lt;style scoped lang="less"&gt;
@color:red;
h2{
  color:@color;
}
&lt;/style&gt;

&lt;style scoped lang="scss"&gt;
$color:green;
h3{
  color:$color;
}
&lt;/style&gt;
<span class="hljs-addition">+&lt;style scoped&gt;</span>
<span class="hljs-addition">+.postcss{</span>
<span class="hljs-addition">+    height:50px;</span>
<span class="hljs-addition">+    width:200px;</span>
<span class="hljs-addition">+    background-color: orange;</span>
<span class="hljs-addition">+    transform: rotate(90deg);</span>
<span class="hljs-addition">+}</span>
<span class="hljs-addition">+&lt;/style&gt;</span>
</code></pre>
<h2 id="t326.typescript">6.typescript <a href="#t326.typescript"> # </a></h2>
<h3 id="t336.1 å®‰è£…">6.1 å®‰è£… <a href="#t336.1 å®‰è£…"> # </a></h3>
<pre><code class="lang-js">cnpm install typescript @babel/core @babel/preset-env  @babel/preset-typescript --save-dev
</code></pre>
<h3 id="t346.2 .babelrc">6.2 .babelrc <a href="#t346.2 .babelrc"> # </a></h3>
<p>.babelrc</p>
<pre><code class="lang-js">{
    <span class="hljs-string">"presets"</span>: [
        [<span class="hljs-string">"@babel/preset-env"</span>],
        <span class="hljs-string">"@babel/preset-typescript"</span>
    ]
}
</code></pre>
<h3 id="t356.3 tsconfig.json">6.3 tsconfig.json <a href="#t356.3 tsconfig.json"> # </a></h3>
<pre><code class="lang-json">{
  <span class="hljs-attr">"compilerOptions"</span>: {
    <span class="hljs-attr">"target"</span>: <span class="hljs-string">"esnext"</span>,
    <span class="hljs-attr">"module"</span>: <span class="hljs-string">"esnext"</span>,
    <span class="hljs-attr">"moduleResolution"</span>: <span class="hljs-string">"node"</span>,
    <span class="hljs-attr">"strict"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"jsx"</span>: <span class="hljs-string">"preserve"</span>,
    <span class="hljs-attr">"sourceMap"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"resolveJsonModule"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"esModuleInterop"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"lib"</span>: [<span class="hljs-string">"esnext"</span>, <span class="hljs-string">"dom"</span>]
  },
  <span class="hljs-attr">"include"</span>: [<span class="hljs-string">"src/**/*.ts"</span>, <span class="hljs-string">"src/**/*.d.ts"</span>, <span class="hljs-string">"src/**/*.tsx"</span>, <span class="hljs-string">"src/**/*.vue"</span>]
}
</code></pre>
<h3 id="t366.4 HelloWorld.vue">6.4 HelloWorld.vue <a href="#t366.4 HelloWorld.vue"> # </a></h3>
<p>src\components\HelloWorld.vue</p>
<pre><code class="lang-diff">&lt;template&gt;
  &lt;h1&gt;{{ msg }}&lt;/h1&gt;
  &lt;h2&gt;less&lt;/h2&gt;
  &lt;h3&gt;sass&lt;/h3&gt;
  &lt;div class="postcss"&gt;&lt;/div&gt;
<span class="hljs-addition">+ &lt;button @click="handleClick"&gt;{{state.count}}&lt;/button&gt;</span>
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { reactive,defineProps } from 'vue'
<span class="hljs-addition">+defineProps({</span>
<span class="hljs-addition">+  msg:String</span>
<span class="hljs-addition">+})</span>
<span class="hljs-addition">+interface State {</span>
<span class="hljs-addition">+  count:number;</span>
<span class="hljs-addition">+}</span>
<span class="hljs-addition">+let state = reactive&lt;State&gt;({count:0});</span>
<span class="hljs-addition">+const handleClick = ()=&gt;{</span>
<span class="hljs-addition">+  console.log(state.count);</span>
<span class="hljs-addition">+  state.count++;</span>
<span class="hljs-addition">+}</span>
&lt;/script&gt;
&lt;style scoped lang="less"&gt;
@color:red;
h2{
  color:@color;
}
&lt;/style&gt;

&lt;style scoped lang="scss"&gt;
$color:green;
h3{
  color:$color;
}
&lt;/style&gt;
&lt;style scoped&gt;
.postcss{
    height:50px;
    width:200px;
    background-color: orange;
    transform: rotate(90deg);
}
&lt;/style&gt;
</code></pre>
<h3 id="t376.5 shims-vue.d.ts">6.5 shims-vue.d.ts <a href="#t376.5 shims-vue.d.ts"> # </a></h3>
<ul>
<li>è®©typescriptè¯†åˆ«æ”¯æŒ<code>.vue</code>æ–‡ä»¶</li>
</ul>
<p>src\shims-vue.d.ts</p>
<pre><code class="lang-js">declare <span class="hljs-built_in">module</span> <span class="hljs-string">'*.vue'</span> {
  <span class="hljs-keyword">import</span> { DefineComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
  <span class="hljs-keyword">const</span> component: DefineComponent&lt;{}, {}, any&gt;
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> component
}

</code></pre>
<h3 id="t386.6 vite-env.d.ts">6.6 vite-env.d.ts <a href="#t386.6 vite-env.d.ts"> # </a></h3>
<ul>
<li>å¦‚æœä½ çš„åº“ä¾èµ–äºæŸä¸ªå…¨å±€åº“ï¼Œä½¿ç”¨/// <reference types="...">æŒ‡ä»¤</reference></li>
<li>ä¸‰æ–œçº¿æŒ‡ä»¤ä»…å¯æ”¾åœ¨åŒ…å«å®ƒçš„æ–‡ä»¶çš„æœ€é¡¶ç«¯</li>
<li>ä¸‰æ–œçº¿å¼•ç”¨å‘Šè¯‰ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è¦å¼•å…¥çš„é¢å¤–çš„æ–‡ä»¶</li>
</ul>
<p>src\vite-env.d.ts</p>
<pre><code class="lang-js"><span class="hljs-comment">/// &lt;reference types="vite/client" /&gt;</span>
</code></pre>
<h2 id="t397.é…ç½®ä»£ç†">7.é…ç½®ä»£ç† <a href="#t397.é…ç½®ä»£ç†"> # </a></h2>
<ul>
<li><a href="https://cn.vitejs.dev/config/#server-proxy">server-proxy</a></li>
<li>ä¸ºå¼€å‘æœåŠ¡å™¨é…ç½®è‡ªå®šä¹‰ä»£ç†è§„åˆ™</li>
<li>æœŸæœ›æ¥æ”¶ä¸€ä¸ª { key: options } å¯¹è±¡ã€‚å¦‚æœ key å€¼ä»¥ ^ å¼€å¤´ï¼Œå°†ä¼šè¢«è§£é‡Šä¸º RegExpã€‚configure å¯ç”¨äºè®¿é—® proxy å®ä¾‹ã€‚</li>
</ul>
<h3 id="t407.1 vite.config.js">7.1 vite.config.js <a href="#t407.1 vite.config.js"> # </a></h3>
<pre><code class="lang-diff">import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import { resolve } from 'path';

// https://vitejs.dev/config/
export default defineConfig({
  resolve: {
    alias: {
      '@': resolve('src')
    }
  },
<span class="hljs-addition">+ server: {</span>
<span class="hljs-addition">+   proxy: {</span>
<span class="hljs-addition">+     '/api': {</span>
<span class="hljs-addition">+       target: 'http://jsonplaceholder.typicode.com',</span>
<span class="hljs-addition">+       changeOrigin: true,</span>
<span class="hljs-addition">+       rewrite: (path) =&gt; path.replace(/^\/api/, '')</span>
<span class="hljs-addition">+     }</span>
<span class="hljs-addition">+   }</span>
<span class="hljs-addition">+ },</span>
  plugins: [vue()]
})

</code></pre>
<h3 id="t417.2 src\App.vue">7.2 src\App.vue <a href="#t417.2 src\App.vue"> # </a></h3>
<p>src\App.vue</p>
<pre><code class="lang-diff">&lt;template&gt;
  &lt;img src="@/assets/avatar.jpg" /&gt;
  &lt;img :src="avatarUrl" /&gt;
  &lt;div class="avatar"&gt;&lt;/div&gt;
  &lt;HelloWorld msg="Hello Vue 3 + Vite" /&gt;
&lt;/template&gt;

&lt;script setup&gt;
//https://github.com/vuejs/rfcs/blob/master/active-rfcs/0040-script-setup.md
import HelloWorld from "@/components/HelloWorld.vue";
import avatarUrl from "@/assets/avatar.jpg";
<span class="hljs-addition">+fetch('/api/todos/1')</span>
<span class="hljs-addition">+  .then(response =&gt; response.json())</span>
<span class="hljs-addition">+  .then(json =&gt; console.log(json))</span>
&lt;/script&gt;
&lt;style scoped&gt;
.avatar {
  width: 200px;
  height: 200px;
  background-image: url(@/assets/avatar.jpg);
  background-size: contain;
}
&lt;/style&gt;
</code></pre>
<h2 id="t428.mock">8.mock <a href="#t428.mock"> # </a></h2>
<ul>
<li><a href="https://www.npmjs.com/package/vite-plugin-mock">vite-plugin-mock</a></li>
</ul>
<pre><code class="lang-js">npm i mockjs vite-plugin-mock -D
node ./node_modules/vite-plugin-mock/node_modules/esbuild/install.js
</code></pre>
<h3 id="t438.1 vite.config.js">8.1 vite.config.js <a href="#t438.1 vite.config.js"> # </a></h3>
<pre><code class="lang-diff">import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import { resolve } from 'path';
<span class="hljs-addition">+import { viteMockServe } from "vite-plugin-mock";</span>
// https://vitejs.dev/config/
export default defineConfig({
  resolve: {
    alias: {
      '@': resolve('src')
    }
  },
  server: {
    proxy: {
      '/api': {
        target: 'http://jsonplaceholder.typicode.com',
        changeOrigin: true,
        rewrite: (path) =&gt; path.replace(/^\/api/, '')
      }
    }
  },
<span class="hljs-addition">+  plugins: [vue(),viteMockServe({})]</span>
})
</code></pre>
<h3 id="t448.2 mock\test.ts">8.2 mock\test.ts <a href="#t448.2 mock\test.ts"> # </a></h3>
<p>mock\test.ts</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { MockMethod } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-mock'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [
    {
        <span class="hljs-attr">url</span>: <span class="hljs-string">'/api/get'</span>,
        <span class="hljs-attr">method</span>: <span class="hljs-string">'get'</span>,
        <span class="hljs-attr">response</span>: <span class="hljs-function">(<span class="hljs-params">{ query }</span>) =&gt;</span> {
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">code</span>: <span class="hljs-number">0</span>,
                <span class="hljs-attr">data</span>: {
                    <span class="hljs-attr">name</span>: <span class="hljs-string">'vben'</span>,
                },
            };
        },
    },
] <span class="hljs-keyword">as</span> MockMethod[];
</code></pre>
<h2 id="t459.ESLint">9.ESLint <a href="#t459.ESLint"> # </a></h2>
<ul>
<li>ESLintæ˜¯ä¸€ä¸ªå¼€æºçš„ JavaScript çš„ linting å·¥å…·<ul>
<li>ä»£ç è´¨é‡é—®é¢˜ï¼šä½¿ç”¨æ–¹å¼æœ‰å¯èƒ½æœ‰é—®é¢˜</li>
<li>ä»£ç é£æ ¼é—®é¢˜ï¼šé£æ ¼ä¸ç¬¦åˆä¸€å®šè§„åˆ™</li>
</ul>
</li>
</ul>
<pre><code class="lang-js">npm install eslint eslint-plugin-vue  @vue/eslint-config-typescript @typescript-eslint/parser @typescript-eslint/eslint-plugin --save-dev
</code></pre>
<h3 id="t469.1 src\components\HelloWorld.vue">9.1 src\components\HelloWorld.vue <a href="#t469.1 src\components\HelloWorld.vue"> # </a></h3>
<p>src\components\HelloWorld.vue</p>
<pre><code class="lang-diff">&lt;template&gt;
  &lt;h1&gt;{{ msg }}&lt;/h1&gt;
  &lt;h2&gt;less&lt;/h2&gt;
  &lt;h3&gt;sass&lt;/h3&gt;
  &lt;div class="postcss" /&gt;
  &lt;button @click="handleClick"&gt;
    {{ state.count }}
  &lt;/button&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { reactive,defineProps } from 'vue'
defineProps({
<span class="hljs-addition">+ msg:{</span>
<span class="hljs-addition">+   type:String,</span>
<span class="hljs-addition">+   default:''</span>
<span class="hljs-addition">+ }</span>
})
interface State {
  count:number;
}
let state = reactive&lt;State&gt;({count:0});
const handleClick = ()=&gt;{
  console.log(state.count);
  state.count++;
}
&lt;/script&gt;
&lt;style scoped lang="less"&gt;
@color:red;
h2{
  color:@color;
}
&lt;/style&gt;

&lt;style scoped lang="scss"&gt;
$color:green;
h3{
  color:$color;
}
&lt;/style&gt;
&lt;style scoped&gt;
.postcss{
    height:50px;
    width:200px;
    background-color: orange;
    transform: rotate(90deg);
}
&lt;/style&gt;
</code></pre>
<h3 id="t479.2 main.ts">9.2 main.ts <a href="#t479.2 main.ts"> # </a></h3>
<p>src\main.ts</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./global.css'</span>
createApp(App).mount(<span class="hljs-string">'#app'</span>)
</code></pre>
<h3 id="t489.3 .eslintrc.js">9.3 .eslintrc.js <a href="#t489.3 .eslintrc.js"> # </a></h3>
<p>.eslintrc.js</p>
<pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-attr">root</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">env</span>: {
        <span class="hljs-attr">browser</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">es2021</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">node</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">extends</span>: [
        <span class="hljs-string">"plugin:vue/vue3-recommended"</span>,
        <span class="hljs-string">"eslint:recommended"</span>,
        <span class="hljs-string">"@vue/typescript/recommended"</span>
    ],
    <span class="hljs-attr">parserOptions</span>: {
        <span class="hljs-attr">ecmaVersion</span>: <span class="hljs-number">2021</span>
    },
    <span class="hljs-attr">rules</span>: {
       <span class="hljs-string">"no-unused-vars"</span>: <span class="hljs-string">"off"</span>,
       <span class="hljs-string">"@typescript-eslint/no-unused-vars"</span>: <span class="hljs-string">"off"</span>,
    }
}
</code></pre>
<h3 id="t499.4 .eslintignore">9.4 .eslintignore <a href="#t499.4 .eslintignore"> # </a></h3>
<p>.eslintignore</p>
<pre><code class="lang-js">*.css
*.jpg
*.jpeg
*.png
*.gif
*.d.ts
</code></pre>
<h3 id="t509.5 package.json">9.5 package.json <a href="#t509.5 package.json"> # </a></h3>
<p>package.json</p>
<pre><code class="lang-diff">{
  "name": "zhufeng-vite2-prepare",
  "version": "1.0.0",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "serve": "vite preview",
<span class="hljs-addition">+   "lint":"eslint --ext .ts,vue src/** --no-error-on-unmatched-pattern --quiet",</span>
<span class="hljs-addition">+   "lint:fix":"eslint --ext .ts,vue src/** --no-error-on-unmatched-pattern --fix"</span>
  },
  "dependencies": {
    "less": "^4.1.1",
    "sass": "^1.35.2",
    "vue": "^3.0.5"
  },
  "devDependencies": {
<span class="hljs-addition">+   "@typescript-eslint/eslint-plugin": "^4.28.2",</span>
<span class="hljs-addition">+   "@typescript-eslint/parser": "^4.28.2",</span>
    "@vitejs/plugin-vue": "^1.2.4",
    "@vue/compiler-sfc": "^3.0.5",
<span class="hljs-addition">+   "@vue/eslint-config-typescript": "^7.0.0",</span>
    "autoprefixer": "^10.2.6",
<span class="hljs-addition">+   "eslint": "^7.30.0",</span>
<span class="hljs-addition">+   "eslint-plugin-vue": "^7.13.0",</span>
    "mockjs": "^1.1.0",
    "vite": "^2.4.0",
    "vite-plugin-mock": "^2.9.1"
  }
}
</code></pre>
<h2 id="t5110.Prettier">10.Prettier <a href="#t5110.Prettier"> # </a></h2>
<ul>
<li>ESLint ä¸»è¦è§£å†³çš„æ˜¯ä»£ç è´¨é‡é—®é¢˜</li>
<li>ä»£ç è´¨é‡è§„åˆ™ (code-quality rules)<ul>
<li>no-unused-vars</li>
<li>no-extra-bind</li>
<li>no-implicit-globals</li>
<li>prefer-promise-reject-errors</li>
</ul>
</li>
<li>ä»£ç é£æ ¼è§„åˆ™ (code-formatting rules)<ul>
<li>max-len</li>
<li>no-mixed-spaces-and-tabs</li>
<li>keyword-spacing</li>
<li>comma-style</li>
</ul>
</li>
<li>ä»£ç é£æ ¼é—®é¢˜éœ€è¦ä½¿ç”¨<code>Prettier</code></li>
<li>Prettier å£°ç§°è‡ªå·±æ˜¯ä¸€ä¸ªæœ‰ä¸»è§çš„ä»£ç æ ¼å¼åŒ–å·¥å…· (opinionated code formatter)</li>
</ul>
<h3 id="t5210.1 å®‰è£…">10.1 å®‰è£… <a href="#t5210.1 å®‰è£…"> # </a></h3>
<ul>
<li><a href="https://github.com/prettier/eslint-plugin-prettier#options">eslint-plugin-prettier</a></li>
</ul>
<pre><code class="lang-js">npm install prettier eslint-plugin-prettier  @vue/eslint-config-prettier --save-dev
</code></pre>
<h3 id="t5310.2 package.json">10.2 package.json <a href="#t5310.2 package.json"> # </a></h3>
<pre><code class="lang-diff">{
  "name": "zhufeng-vite2-prepare",
  "version": "1.0.0",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "serve": "vite preview",
    "lint": "eslint --ext .ts,vue src/** --no-error-on-unmatched-pattern --quiet",
    "lint:fix": "eslint --ext .ts,vue src/** --no-error-on-unmatched-pattern --fix"
  },
  "dependencies": {
    "less": "^4.1.1",
    "sass": "^1.35.2",
    "vue": "^3.0.5"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^4.28.2",
    "@typescript-eslint/parser": "^4.28.2",
    "@vitejs/plugin-vue": "^1.2.4",
    "@vue/compiler-sfc": "^3.0.5",
<span class="hljs-addition">+   "@vue/eslint-config-prettier": "^6.0.0",</span>
    "@vue/eslint-config-typescript": "^7.0.0",
    "autoprefixer": "^10.2.6",
    "eslint": "^7.30.0",
<span class="hljs-addition">+   "eslint-plugin-prettier": "^3.4.0",</span>
    "eslint-plugin-vue": "^7.13.0",
    "mockjs": "^1.1.0",
<span class="hljs-addition">+   "prettier": "^2.3.2",</span>
    "vite": "^2.4.0",
    "vite-plugin-mock": "^2.9.1"
  }
}
</code></pre>
<h3 id="t5410.3 .eslintrc.js">10.3 .eslintrc.js <a href="#t5410.3 .eslintrc.js"> # </a></h3>
<p>.eslintrc.js</p>
<pre><code class="lang-diff">module.exports = {
  root: true,
  env: {
    browser: true,
    es2021: true,
    node: true,
  },
  extends: [
    "plugin:vue/vue3-recommended",
    "eslint:recommended",
    "@vue/typescript/recommended",
<span class="hljs-addition">+   "@vue/prettier",</span>
<span class="hljs-addition">+   "@vue/prettier/@typescript-eslint",</span>
  ],
  parserOptions: {
    ecmaVersion: 2021,
  },
  rules: {
    "no-unused-vars": "off",
    "@typescript-eslint/no-unused-vars": "off",
<span class="hljs-addition">+   "prettier/prettier": ["error", { endOfLine: "auto" }],</span>
  },
};

</code></pre>
<h2 id="t5511.å•å…ƒæµ‹è¯•">11.å•å…ƒæµ‹è¯• <a href="#t5511.å•å…ƒæµ‹è¯•"> # </a></h2>
<ul>
<li><a href="https://next.vue-test-utils.vuejs.org/">next.vue-test-utils.vuejs.org</a></li>
<li><a href="https://github.com/vuejs/vue-jest/tree/v3">vue-jest/tree/v3</a></li>
<li><a href="https://www.jestjs.cn/docs/getting-started">jestjs</a></li>
</ul>
<h3 id="t5611.1 å®‰è£…ä¾èµ–">11.1 å®‰è£…ä¾èµ– <a href="#t5611.1 å®‰è£…ä¾èµ–"> # </a></h3>
<pre><code class="lang-js">cnpm i jest@next babel-jest@next @types/jest vue-jest@next ts-jest@next @vue/test-utils@next --save-dev
</code></pre>
<h3 id="t5711.2 package.json">11.2 package.json <a href="#t5711.2 package.json"> # </a></h3>
<pre><code class="lang-diff">{
  "name": "zhufeng-vite2-prepare",
  "version": "1.0.0",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "serve": "vite preview",
    "lint": "eslint --ext .ts,vue src/** --no-error-on-unmatched-pattern --quiet",
    "lint:fix": "eslint --ext .ts,vue src/** --no-error-on-unmatched-pattern --fix"
  },
  "dependencies": {
    "less": "^4.1.1",
    "sass": "^1.35.2",
    "vue": "^3.0.5"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^4.28.2",
    "@typescript-eslint/parser": "^4.28.2",
    "@vitejs/plugin-vue": "^1.2.4",
    "@vue/compiler-sfc": "^3.0.5",
    "@vue/eslint-config-prettier": "^6.0.0",
    "@vue/eslint-config-typescript": "^7.0.0",
    "autoprefixer": "^10.2.6",
    "eslint": "^7.30.0",
    "eslint-plugin-prettier": "^3.4.0",
    "eslint-plugin-vue": "^7.13.0",
    "mockjs": "^1.1.0",
    "prettier": "^2.3.2",
    "vite": "^2.4.0",
    "vite-plugin-mock": "^2.9.1"
  }
}
</code></pre>
<h3 id="t5811.3 jest.config.js">11.3 jest.config.js <a href="#t5811.3 jest.config.js"> # </a></h3>
<ul>
<li><a href="https://github.com/vuejs/vue-jest/tree/v3">vue-jest</a>Jest Vue transformer with source map support</li>
<li><a href="https://www.npmjs.com/package/babel-jest">babel-jest</a>Babel jest plugin</li>
<li><a href="https://www.npmjs.com/package/ts-jest">ts-jest</a>A Jest transformer with source map support that lets you use Jest to test projects written in TypeScript</li>
</ul>
<p>jest.config.js</p>
<pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">testEnvironment</span>: <span class="hljs-string">"jsdom"</span>,
  <span class="hljs-attr">transform</span>: {
    <span class="hljs-string">"^.+\\.vue$"</span>: <span class="hljs-string">"vue-jest"</span>,
    <span class="hljs-string">"^.+\\.jsx?$"</span>: <span class="hljs-string">"babel-jest"</span>,
    <span class="hljs-string">"^.+\\.tsx?$"</span>: <span class="hljs-string">"ts-jest"</span>,
  },
  <span class="hljs-attr">moduleNameMapper</span>: {
    <span class="hljs-string">"^@/(.*)$"</span>: <span class="hljs-string">"&lt;rootDir&gt;/src/$1"</span>,
  },
  <span class="hljs-attr">testMatch</span>: [<span class="hljs-string">"**/tests/**/*.spec.[jt]s"</span>],
};
</code></pre>
<h3 id="t5911.4 tests\test.ts">11.4 tests\test.ts <a href="#t5911.4 tests\test.ts"> # </a></h3>
<p>tests\test.ts</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { mount } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/test-utils'</span>
<span class="hljs-keyword">const</span> MessageComponent = {
  <span class="hljs-attr">template</span>: <span class="hljs-string">'&lt;p&gt;{{ msg }}&lt;/p&gt;'</span>,
  <span class="hljs-attr">props</span>: [<span class="hljs-string">'msg'</span>]
}
test(<span class="hljs-string">'displays message'</span>, () =&gt; {
  <span class="hljs-keyword">const</span> wrapper = mount(MessageComponent, {
    <span class="hljs-attr">props</span>: {
      <span class="hljs-attr">msg</span>: <span class="hljs-string">'Hello world'</span>
    }
  })
  expect(wrapper.text()).toContain(<span class="hljs-string">'Hello world'</span>)
})
</code></pre>
<h3 id="t6011.5 tsconfig.json">11.5 tsconfig.json <a href="#t6011.5 tsconfig.json"> # </a></h3>
<p>tsconfig.json</p>
<pre><code class="lang-diff">{
  "compilerOptions": {
    "target": "esnext",
    "module": "esnext",
    "moduleResolution": "node",
    "strict": true,
    "jsx": "preserve",
    "sourceMap": true,
    "resolveJsonModule": true,
    "esModuleInterop": true,
    "lib": ["esnext", "dom"],
<span class="hljs-addition">+   "types":["vite/client","jest"],</span>
<span class="hljs-addition">+   "baseUrl": "./",</span>
<span class="hljs-addition">+   "paths": {</span>
<span class="hljs-addition">+     "@": ["./src"]</span>
<span class="hljs-addition">+   }</span>
  },
<span class="hljs-addition">+ "include": ["src/**/*.ts", "src/**/*.d.ts", "src/**/*.tsx", "src/**/*.vue","tests/**/*.spec.ts", "tests/test.ts"]</span>
}
</code></pre>
<h3 id="t6111.6 package.json">11.6 package.json <a href="#t6111.6 package.json"> # </a></h3>
<p>package.json</p>
<pre><code class="lang-diff">{
   "scripts": {
    "dev": "vite",
    "build": "vite build",
    "serve": "vite preview",
    "lint": "eslint --ext .ts,vue src/** --no-error-on-unmatched-pattern --quiet",
    "lint:fix": "eslint --ext .ts,vue src/** --no-error-on-unmatched-pattern --fix",
<span class="hljs-addition">+   "test": "jest  --passWithNoTests"</span>
  }
}
</code></pre>
<h2 id="t6212.git hook">12.git hook <a href="#t6212.git hook"> # </a></h2>
<ul>
<li>å¯ä»¥åœ¨<code>git commit</code>ä¹‹å‰æ£€æŸ¥ä»£ç ï¼Œä¿è¯æ‰€æœ‰æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­çš„ä»£ç éƒ½æ˜¯ç¬¦åˆè§„èŒƒçš„</li>
<li>å¯ä»¥åœ¨<code>git push</code>ä¹‹å‰æ‰§è¡Œå•å…ƒæµ‹è¯•,ä¿è¯æ‰€æœ‰çš„æäº¤çš„ä»£ç ç»è¿‡çš„å•å…ƒæµ‹è¯•</li>
<li><a href="[husky](https://www.npmjs.com/package/husky">husky</a>)å¯ä»¥è®©æˆ‘ä»¬å‘é¡¹ç›®ä¸­æ–¹ä¾¿æ·»åŠ git hooks</li>
<li><a href="https://www.npmjs.com/package/lint-staged">lint-staged</a>ç”¨äºå®ç°æ¯æ¬¡æäº¤åªæ£€æŸ¥æœ¬æ¬¡æäº¤æ‰€ä¿®æ”¹çš„æ–‡ä»¶</li>
<li><a href="https://github.com/okonet/lint-staged#configuration">lint-staged#configuration</a></li>
<li><a href="">Commitlint</a>å¯ä»¥è§„èŒƒ<code>git commit -m ""</code>ä¸­çš„æè¿°ä¿¡æ¯</li>
</ul>
<h3 id="t6312.1 æ³¨é‡Šè§„èŒƒ">12.1 æ³¨é‡Šè§„èŒƒ <a href="#t6312.1 æ³¨é‡Šè§„èŒƒ"> # </a></h3>
<ul>
<li>commitlint æ¨èæˆ‘ä»¬ä½¿ç”¨ config-conventional é…ç½®å»å†™ commit</li>
<li>æäº¤æ ¼å¼ <code>git commit -m &lt;type&gt;[optional scope]: &lt;description&gt;</code><ul>
<li>type ï¼šç”¨äºè¡¨æ˜æˆ‘ä»¬è¿™æ¬¡æäº¤çš„æ”¹åŠ¨ç±»å‹ï¼Œæ˜¯æ–°å¢äº†åŠŸèƒ½ï¼Ÿè¿˜æ˜¯ä¿®æ”¹äº†æµ‹è¯•ä»£ç ï¼Ÿåˆæˆ–è€…æ˜¯æ›´æ–°äº†æ–‡æ¡£ï¼Ÿ</li>
<li>optional scopeï¼šä¸€ä¸ªå¯é€‰çš„ä¿®æ”¹èŒƒå›´ã€‚ç”¨äºæ ‡è¯†æ­¤æ¬¡æäº¤ä¸»è¦æ¶‰åŠåˆ°ä»£ç ä¸­å“ªä¸ªæ¨¡å—</li>
<li>descriptionï¼šä¸€å¥è¯æè¿°æ­¤æ¬¡æäº¤çš„ä¸»è¦å†…å®¹ï¼Œåšåˆ°è¨€ç®€æ„èµ…</li>
</ul>
</li>
</ul>
<h4 id="t6412.1.1 typeç±»å‹">12.1.1 typeç±»å‹ <a href="#t6412.1.1 typeç±»å‹"> # </a></h4>
<table>
<thead>
<tr>
<th style="text-align:left">ç±»å‹</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">build</td>
<td style="text-align:left">ç¼–è¯‘ç›¸å…³çš„ä¿®æ”¹ï¼Œä¾‹å¦‚å‘å¸ƒç‰ˆæœ¬ã€å¯¹é¡¹ç›®æ„å»ºæˆ–è€…ä¾èµ–çš„æ”¹åŠ¨</td>
</tr>
<tr>
<td style="text-align:left">chore</td>
<td style="text-align:left">å…¶ä»–ä¿®æ”¹, æ¯”å¦‚æ”¹å˜æ„å»ºæµç¨‹ã€æˆ–è€…å¢åŠ ä¾èµ–åº“ã€å·¥å…·ç­‰</td>
</tr>
<tr>
<td style="text-align:left">ci</td>
<td style="text-align:left">æŒç»­é›†æˆä¿®æ”¹</td>
</tr>
<tr>
<td style="text-align:left">docs</td>
<td style="text-align:left">æ–‡æ¡£ä¿®æ”¹</td>
</tr>
<tr>
<td style="text-align:left">feature</td>
<td style="text-align:left">æ–°ç‰¹æ€§ã€æ–°åŠŸèƒ½</td>
</tr>
<tr>
<td style="text-align:left">fix</td>
<td style="text-align:left">ä¿®æ”¹bug</td>
</tr>
<tr>
<td style="text-align:left">perf</td>
<td style="text-align:left">ä¼˜åŒ–ç›¸å…³ï¼Œæ¯”å¦‚æå‡æ€§èƒ½ã€ä½“éªŒ</td>
</tr>
<tr>
<td style="text-align:left">refactor</td>
<td style="text-align:left">ä»£ç é‡æ„</td>
</tr>
<tr>
<td style="text-align:left">revert</td>
<td style="text-align:left">å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬</td>
</tr>
<tr>
<td style="text-align:left">style</td>
<td style="text-align:left">ä»£ç æ ¼å¼ä¿®æ”¹</td>
</tr>
<tr>
<td style="text-align:left">test</td>
<td style="text-align:left">æµ‹è¯•ç”¨ä¾‹ä¿®æ”¹</td>
</tr>
</tbody>
</table>
<h3 id="t6512.2 å®‰è£…">12.2 å®‰è£… <a href="#t6512.2 å®‰è£…"> # </a></h3>
<pre><code class="lang-js">cnpm i husky lint-staged @commitlint/cli @commitlint/config-conventional --save-dev
</code></pre>
<h3 id="t6612.3 é…ç½®è„šæœ¬">12.3 é…ç½®è„šæœ¬ <a href="#t6612.3 é…ç½®è„šæœ¬"> # </a></h3>
<ul>
<li><code>prepare</code>è„šæœ¬ä¼šåœ¨<code>npm install</code>(ä¸å¸¦å‚æ•°)ä¹‹åè‡ªåŠ¨æ‰§è¡Œ</li>
<li>å½“æˆ‘ä»¬æ‰§è¡Œnpm installå®‰è£…å®Œé¡¹ç›®ä¾èµ–åä¼šæ‰§è¡Œ<code>husky install</code>å‘½ä»¤ï¼Œè¯¥å‘½ä»¤ä¼šåˆ›å»º<code>.husky/</code>ç›®å½•å¹¶æŒ‡å®šè¯¥ç›®å½•ä¸º<code>git hooks</code>æ‰€åœ¨çš„ç›®å½•</li>
</ul>
<pre><code class="lang-js">npm <span class="hljs-keyword">set</span>-script prepare "husky install"
npm run prepare
</code></pre>
<h3 id="t6712.4 åˆ›å»ºhooks">12.4 åˆ›å»ºhooks <a href="#t6712.4 åˆ›å»ºhooks"> # </a></h3>
<pre><code class="lang-js">npx husky add .husky/pre-commit <span class="hljs-string">"lint-staged"</span>
npx husky add .husky/commit-msg <span class="hljs-string">"npx --no-install commitlint --edit $1"</span>
npx husky add .husky/pre-push <span class="hljs-string">"npm run test"</span>
</code></pre>
<h3 id="t6812.5 commitlint.config.js">12.5 commitlint.config.js <a href="#t6812.5 commitlint.config.js"> # </a></h3>
<p>commitlint.config.js</p>
<pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">extends</span>: [<span class="hljs-string">"@commitlint/config-conventional"</span>],
  <span class="hljs-attr">rules</span>: {
    <span class="hljs-string">"type-enum"</span>: [
      <span class="hljs-number">2</span>,
      <span class="hljs-string">"always"</span>,
      [
        <span class="hljs-string">"feature"</span>,
        <span class="hljs-string">"update"</span>,
        <span class="hljs-string">"fixbug"</span>,
        <span class="hljs-string">"refactor"</span>,
        <span class="hljs-string">"optimize"</span>,
        <span class="hljs-string">"style"</span>,
        <span class="hljs-string">"docs"</span>,
        <span class="hljs-string">"chore"</span>,
      ],
    ],
    <span class="hljs-string">"type-case"</span>: [<span class="hljs-number">0</span>],
    <span class="hljs-string">"type-empty"</span>: [<span class="hljs-number">0</span>],
    <span class="hljs-string">"scope-empty"</span>: [<span class="hljs-number">0</span>],
    <span class="hljs-string">"scope-case"</span>: [<span class="hljs-number">0</span>],
    <span class="hljs-string">"subject-full-stop"</span>: [<span class="hljs-number">0</span>, <span class="hljs-string">"never"</span>],
    <span class="hljs-string">"subject-case"</span>: [<span class="hljs-number">0</span>, <span class="hljs-string">"never"</span>],
    <span class="hljs-string">"header-max-length"</span>: [<span class="hljs-number">0</span>, <span class="hljs-string">"always"</span>, <span class="hljs-number">72</span>],
  },
};
</code></pre>
<h2 id="t69å‚è€ƒ">å‚è€ƒ <a href="#t69å‚è€ƒ"> # </a></h2>
<ul>
<li><a href="https://zhuanlan.zhihu.com/p/80574300">ææ‡‚ ESLint å’Œ Prettier</a></li>
</ul>

    