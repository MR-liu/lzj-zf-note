
        <h2 id="t01.动机">1.动机 <a href="#t01.动机"> # </a></h2>
<ul>
<li>Module Federation的动机是为了不同开发小组间共同开发一个或者多个应用</li>
<li>应用将被划分为更小的应用块，一个应用块，可以是比如头部导航或者侧边栏的前端组件，也可以是数据获取逻辑的逻辑组件</li>
<li>每个应用块由不同的组开发</li>
<li>应用或应用块共享其他其他应用块或者库</li>
</ul>
<p><img src="https://img.zhufengpeixun.com/1608392171072" alt="1608392171072"></p>
<h2 id="t12.Module Federation">2.Module Federation <a href="#t12.Module Federation"> # </a></h2>
<ul>
<li>使用Module Federation时，每个应用块都是一个独立的构建，这些构建都将编译为容器</li>
<li>容器可以被其他应用或者其他容器应用</li>
<li>一个被引用的容器被称为<code>remote</code>, 引用者被称为<code>host</code>，<code>remote</code>暴露模块给<code>host</code>, <code>host</code>则可以使用这些暴露的模块，这些模块被成为<code>remote</code>模块</li>
</ul>
<p><img src="https://img.zhufengpeixun.com/1608722799323" alt="1608722799323"></p>
<h2 id="t23.实战">3.实战 <a href="#t23.实战"> # </a></h2>
<h3 id="t33.1 配置参数">3.1 配置参数 <a href="#t33.1 配置参数"> # </a></h3>
<table>
<thead>
<tr>
<th style="text-align:left">字段</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">name</td>
<td style="text-align:left">string</td>
<td style="text-align:left">必传值，即输出的模块名，被远程引用时路径为${name}/${expose}</td>
</tr>
<tr>
<td style="text-align:left">library</td>
<td style="text-align:left">object</td>
<td style="text-align:left">声明全局变量的方式，name为umd的name</td>
</tr>
<tr>
<td style="text-align:left">filename</td>
<td style="text-align:left">string</td>
<td style="text-align:left">构建输出的文件名</td>
</tr>
<tr>
<td style="text-align:left">remotes</td>
<td style="text-align:left">object</td>
<td style="text-align:left">远程引用的应用名及其别名的映射，使用时以key值作为name</td>
</tr>
<tr>
<td style="text-align:left">exposes</td>
<td style="text-align:left">object</td>
<td style="text-align:left">被远程引用时可暴露的资源路径及其别名</td>
</tr>
<tr>
<td style="text-align:left">shared</td>
<td style="text-align:left">object</td>
<td style="text-align:left">与其他应用之间可以共享的第三方依赖，使你的代码中不用重复加载同一份依赖</td>
</tr>
</tbody>
</table>
<h3 id="t43.2 安装">3.2 安装 <a href="#t43.2 安装"> # </a></h3>
<pre><code class="lang-js">cnpm i webpack webpack-cli webpack-dev-server babel-loader @babel/core  @babel/preset-env -D
</code></pre>
<h3 id="t53.2 remote">3.2 remote <a href="#t53.2 remote"> # </a></h3>
<h4 id="t63.2.1 remote\webpack.config.js">3.2.1 remote\webpack.config.js <a href="#t63.2.1 remote\webpack.config.js"> # </a></h4>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);
<span class="hljs-keyword">let</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">"webpack"</span>);
<span class="hljs-keyword">let</span> HtmlWebpackPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">"html-webpack-plugin"</span>);
<span class="hljs-keyword">const</span> ModuleFederationPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">"webpack/lib/container/ModuleFederationPlugin"</span>);
<span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-attr">mode</span>: <span class="hljs-string">"development"</span>,
    <span class="hljs-attr">entry</span>: <span class="hljs-string">"./src/index.js"</span>,
    <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">publicPath</span>: <span class="hljs-string">"http://localhost:3000/"</span>,
    },
    <span class="hljs-attr">devServer</span>: {
        <span class="hljs-attr">port</span>: <span class="hljs-number">3000</span>
    },
    <span class="hljs-attr">module</span>: {
        <span class="hljs-attr">rules</span>: [
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.jsx?$/</span>,
                <span class="hljs-attr">use</span>: {
                    <span class="hljs-attr">loader</span>: <span class="hljs-string">'babel-loader'</span>,
                    <span class="hljs-attr">options</span>: {
                        <span class="hljs-attr">presets</span>: [<span class="hljs-string">"@babel/preset-react"</span>]
                    },
                },
                <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
            },
        ]
    },
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-keyword">new</span> HtmlWebpackPlugin({
            <span class="hljs-attr">template</span>:<span class="hljs-string">'./public/index.html'</span>
        }),
        <span class="hljs-keyword">new</span> ModuleFederationPlugin({
            <span class="hljs-attr">filename</span>: <span class="hljs-string">"remoteEntry.js"</span>,
            <span class="hljs-attr">name</span>: <span class="hljs-string">"remote"</span>,
            <span class="hljs-attr">exposes</span>: {
                <span class="hljs-string">"./NewsList"</span>: <span class="hljs-string">"./src/NewsList"</span>,
            }
          })
    ]
}
</code></pre>
<h4 id="t73.2.2 remote\src\index.js">3.2.2 remote\src\index.js <a href="#t73.2.2 remote\src\index.js"> # </a></h4>
<p>remote\src\index.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span>(<span class="hljs-string">"./bootstrap"</span>);
</code></pre>
<h4 id="t83.2.3 remote\src\bootstrap.js">3.2.3 remote\src\bootstrap.js <a href="#t83.2.3 remote\src\bootstrap.js"> # </a></h4>
<p>remote\src\bootstrap.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">"react-dom"</span>;
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">"./App"</span>;
ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>, <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"root"</span>));
</code></pre>
<h4 id="t93.2.4 remote\src\App.js">3.2.4 remote\src\App.js <a href="#t93.2.4 remote\src\App.js"> # </a></h4>
<p>remote\src\App.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> NewsList <span class="hljs-keyword">from</span> <span class="hljs-string">'./NewsList'</span>;
<span class="hljs-keyword">const</span> App = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>本地组件NewsList<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">NewsList</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;
</code></pre>
<h4 id="t103.2.5 remote\src\NewsList.js">3.2.5 remote\src\NewsList.js <a href="#t103.2.5 remote\src\NewsList.js"> # </a></h4>
<p>remote\src\NewsList.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> ()=&gt;(
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>新闻列表<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
)
</code></pre>
<h3 id="t113.3 host">3.3 host <a href="#t113.3 host"> # </a></h3>
<h4 id="t123.3.1 host\webpack.config.js">3.3.1 host\webpack.config.js <a href="#t123.3.1 host\webpack.config.js"> # </a></h4>
<p>host\webpack.config.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);
<span class="hljs-keyword">let</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">"webpack"</span>);
<span class="hljs-keyword">let</span> HtmlWebpackPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">"html-webpack-plugin"</span>);
<span class="hljs-keyword">const</span> ModuleFederationPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">"webpack/lib/container/ModuleFederationPlugin"</span>);
<span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-attr">mode</span>: <span class="hljs-string">"development"</span>,
    <span class="hljs-attr">entry</span>: <span class="hljs-string">"./src/index.js"</span>,
    <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">publicPath</span>: <span class="hljs-string">"http://localhost:8000/"</span>,
    },
    <span class="hljs-attr">devServer</span>: {
        <span class="hljs-attr">port</span>: <span class="hljs-number">8000</span>
    },
    <span class="hljs-attr">module</span>: {
        <span class="hljs-attr">rules</span>: [
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.jsx?$/</span>,
                <span class="hljs-attr">use</span>: {
                    <span class="hljs-attr">loader</span>: <span class="hljs-string">'babel-loader'</span>,
                    <span class="hljs-attr">options</span>: {
                        <span class="hljs-attr">presets</span>: [<span class="hljs-string">"@babel/preset-react"</span>]
                    },
                },
                <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
            },
        ]
    },
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-keyword">new</span> HtmlWebpackPlugin({
            <span class="hljs-attr">template</span>: <span class="hljs-string">'./public/index.html'</span>
        }),
        <span class="hljs-keyword">new</span> ModuleFederationPlugin({
            <span class="hljs-attr">filename</span>: <span class="hljs-string">"remoteEntry.js"</span>,
            <span class="hljs-attr">name</span>: <span class="hljs-string">"host"</span>,
            <span class="hljs-attr">remotes</span>: {
                <span class="hljs-attr">remote</span>: <span class="hljs-string">"remote@http://localhost:3000/remoteEntry.js"</span>
            }
        })
    ]
}
</code></pre>
<h4 id="t133.3.2 host\src\index.js">3.3.2 host\src\index.js <a href="#t133.3.2 host\src\index.js"> # </a></h4>
<p>host\src\index.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span>(<span class="hljs-string">"./bootstrap"</span>);
</code></pre>
<h4 id="t143.3.3 host\src\bootstrap.js">3.3.3 host\src\bootstrap.js <a href="#t143.3.3 host\src\bootstrap.js"> # </a></h4>
<p>host\src\bootstrap.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">"react-dom"</span>;
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">"./App"</span>;
ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>, <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"root"</span>));
</code></pre>
<h4 id="t153.3.4 host\src\App.js">3.3.4 host\src\App.js <a href="#t153.3.4 host\src\App.js"> # </a></h4>
<p>host\src\App.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> Slides <span class="hljs-keyword">from</span> <span class="hljs-string">'./Slides'</span>;
<span class="hljs-keyword">const</span> RemoteNewsList = React.lazy(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">"remote/NewsList"</span>));

<span class="hljs-keyword">const</span> App = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> &gt;</span>本地组件Slides, 远程组件NewsList<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Slides</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">React.Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">"Loading NewsList"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">RemoteNewsList</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">React.Suspense</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;
</code></pre>
<h4 id="t163.3.5 host\src\Slides.js">3.3.5 host\src\Slides.js <a href="#t163.3.5 host\src\Slides.js"> # </a></h4>
<p>host\src\Slides.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> ()=&gt;(
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>轮播图<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
)
</code></pre>
<h2 id="t174.shared">4.shared <a href="#t174.shared"> # </a></h2>
<ul>
<li><code>shared</code>配置主要是用来避免项目出现多个公共依赖</li>
</ul>
<h3 id="t184.1 remote\webpack.config.js">4.1 remote\webpack.config.js <a href="#t184.1 remote\webpack.config.js"> # </a></h3>
<pre><code class="lang-diff">    plugins: [
        new HtmlWebpackPlugin({
            template:'./public/index.html'
        }),
        new ModuleFederationPlugin({
            filename: "remoteEntry.js",
            name: "remote",
            exposes: {
                "./NewsList": "./src/NewsList",
            },
<span class="hljs-addition">+            shared:{</span>
<span class="hljs-addition">+                react: { singleton: true },</span>
<span class="hljs-addition">+                "react-dom": { singleton: true }</span>
<span class="hljs-addition">+              }</span>
          })
    ]
</code></pre>
<h3 id="t194.2 host\webpack.config.js">4.2 host\webpack.config.js <a href="#t194.2 host\webpack.config.js"> # </a></h3>
<pre><code class="lang-diff">    plugins: [
        new HtmlWebpackPlugin({
            template: './public/index.html'
        }),
        new ModuleFederationPlugin({
            filename: "remoteEntry.js",
            name: "host",
            remotes: {
                remote: "remote@http://localhost:3000/remoteEntry.js"
            },
<span class="hljs-addition">+           shared:{</span>
<span class="hljs-addition">+                react: { singleton: true },</span>
<span class="hljs-addition">+                "react-dom": { singleton: true }</span>
<span class="hljs-addition">+           }</span>
        })
    ]
</code></pre>
<h2 id="t205.双向依赖">5.双向依赖 <a href="#t205.双向依赖"> # </a></h2>
<ul>
<li>Module Federation 的共享可以是双向的</li>
</ul>
<h3 id="t215.1 remote\webpack.config.js">5.1 remote\webpack.config.js <a href="#t215.1 remote\webpack.config.js"> # </a></h3>
<pre><code class="lang-diff">    plugins: [
        new HtmlWebpackPlugin({
            template:'./public/index.html'
        }),
        new ModuleFederationPlugin({
            filename: "remoteEntry.js",
            name: "remote",
<span class="hljs-addition">+            remotes: {</span>
<span class="hljs-addition">+                host: "host@http://localhost:8000/remoteEntry.js"</span>
<span class="hljs-addition">+            },</span>
            exposes: {
                "./NewsList": "./src/NewsList",
            },
            shared:{
                react: { singleton: true },
                "react-dom": { singleton: true }
              }
          })
    ]
</code></pre>
<h3 id="t225.2 host\webpack.config.js">5.2 host\webpack.config.js <a href="#t225.2 host\webpack.config.js"> # </a></h3>
<pre><code class="lang-diff">    plugins: [
        new HtmlWebpackPlugin({
            template: './public/index.html'
        }),
        new ModuleFederationPlugin({
            filename: "remoteEntry.js",
            name: "host",
            remotes: {
                remote: "remote@http://localhost:3000/remoteEntry.js"
            },
<span class="hljs-addition">+           exposes: {</span>
<span class="hljs-addition">+                "./Slides": "./src/Slides",</span>
<span class="hljs-addition">+           },</span>
            shared:{
                react: { singleton: true },
                "react-dom": { singleton: true }
              }
        })
    ]
</code></pre>
<h3 id="t235.3 remote\src\App.js">5.3 remote\src\App.js <a href="#t235.3 remote\src\App.js"> # </a></h3>
<p>remote\src\App.js</p>
<pre><code class="lang-diff">import React from "react";
import NewsList from './NewsList';
<span class="hljs-addition">+const RemoteSlides = React.lazy(() =&gt; import("host/Slides"));</span>
const App = () =&gt; (
  &lt;div&gt;
<span class="hljs-addition">+    &lt;h2&gt;本地组件NewsList,远程组件Slides&lt;/h2&gt;</span>
    &lt;NewsList /&gt;
<span class="hljs-addition">+    &lt;React.Suspense fallback="Loading Slides"&gt;</span>
<span class="hljs-addition">+      &lt;RemoteSlides /&gt;</span>
<span class="hljs-addition">+    &lt;/React.Suspense&gt;</span>
  &lt;/div&gt;
);

export default App;
</code></pre>
<h2 id="t246.多个remote">6.多个remote <a href="#t246.多个remote"> # </a></h2>
<h3 id="t256.1 all\webpack.config.js">6.1 all\webpack.config.js <a href="#t256.1 all\webpack.config.js"> # </a></h3>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);
<span class="hljs-keyword">let</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">"webpack"</span>);
<span class="hljs-keyword">let</span> HtmlWebpackPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">"html-webpack-plugin"</span>);
<span class="hljs-keyword">const</span> ModuleFederationPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">"webpack/lib/container/ModuleFederationPlugin"</span>);
<span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-attr">mode</span>: <span class="hljs-string">"development"</span>,
    <span class="hljs-attr">entry</span>: <span class="hljs-string">"./src/index.js"</span>,
    <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">publicPath</span>: <span class="hljs-string">"http://localhost:3000/"</span>,
    },
    <span class="hljs-attr">devServer</span>: {
        <span class="hljs-attr">port</span>: <span class="hljs-number">5000</span>
    },
    <span class="hljs-attr">module</span>: {
        <span class="hljs-attr">rules</span>: [
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.jsx?$/</span>,
                <span class="hljs-attr">use</span>: {
                    <span class="hljs-attr">loader</span>: <span class="hljs-string">'babel-loader'</span>,
                    <span class="hljs-attr">options</span>: {
                        <span class="hljs-attr">presets</span>: [<span class="hljs-string">"@babel/preset-react"</span>]
                    },
                },
                <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
            },
        ]
    },
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-keyword">new</span> HtmlWebpackPlugin({
            <span class="hljs-attr">template</span>:<span class="hljs-string">'./public/index.html'</span>
        }),
        <span class="hljs-keyword">new</span> ModuleFederationPlugin({
            <span class="hljs-attr">filename</span>: <span class="hljs-string">"remoteEntry.js"</span>,
            <span class="hljs-attr">name</span>: <span class="hljs-string">"all"</span>,
            <span class="hljs-attr">remotes</span>: {
                <span class="hljs-attr">remote</span>: <span class="hljs-string">"remote@http://localhost:3000/remoteEntry.js"</span>,
                <span class="hljs-attr">host</span>: <span class="hljs-string">"host@http://localhost:8000/remoteEntry.js"</span>,
            },
            <span class="hljs-attr">shared</span>:{
                <span class="hljs-attr">react</span>: { <span class="hljs-attr">singleton</span>: <span class="hljs-literal">true</span> },
                <span class="hljs-string">"react-dom"</span>: { <span class="hljs-attr">singleton</span>: <span class="hljs-literal">true</span> }
              }
          })
    ]
}
</code></pre>
<h3 id="t266.2 remote\src\index.js">6.2 remote\src\index.js <a href="#t266.2 remote\src\index.js"> # </a></h3>
<p>remote\src\index.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span>(<span class="hljs-string">"./bootstrap"</span>);
</code></pre>
<h3 id="t276.3 remote\src\bootstrap.js">6.3 remote\src\bootstrap.js <a href="#t276.3 remote\src\bootstrap.js"> # </a></h3>
<p>remote\src\bootstrap.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> ReactDOM <span class="hljs-keyword">from</span> <span class="hljs-string">"react-dom"</span>;
<span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">"./App"</span>;
ReactDOM.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>, <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"root"</span>));
</code></pre>
<h3 id="t286.4 remote\src\App.js">6.4 remote\src\App.js <a href="#t286.4 remote\src\App.js"> # </a></h3>
<p>remote\src\App.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">const</span> RemoteSlides = React.lazy(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">"host/Slides"</span>));
<span class="hljs-keyword">const</span> RemoteNewsList = React.lazy(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">"remote/NewsList"</span>));
<span class="hljs-keyword">const</span> App = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>远程组件Slides,远程组件NewsList<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">React.Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">"Loading Slides"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">RemoteSlides</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">React.Suspense</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">React.Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">"Loading NewsList"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">RemoteNewsList</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">React.Suspense</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> App;
</code></pre>
<h2 id="t297. 运行原理">7. 运行原理 <a href="#t297. 运行原理"> # </a></h2>
<h3 id="t307.1 源代码">7.1 源代码 <a href="#t307.1 源代码"> # </a></h3>
<h4 id="t317.1.1 remote">7.1.1 remote <a href="#t317.1.1 remote"> # </a></h4>
<h5 id="t327.1.1.1 webpack.config.js">7.1.1.1 webpack.config.js <a href="#t327.1.1.1 webpack.config.js"> # </a></h5>
<p>Remote\webpack.config.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);
<span class="hljs-keyword">let</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">"webpack"</span>);
<span class="hljs-keyword">let</span> HtmlWebpackPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">"html-webpack-plugin"</span>);
<span class="hljs-keyword">const</span> ModuleFederationPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">"webpack/lib/container/ModuleFederationPlugin"</span>);
<span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-attr">mode</span>: <span class="hljs-string">"development"</span>,
    <span class="hljs-attr">devtool</span>:<span class="hljs-literal">false</span>,
    <span class="hljs-attr">entry</span>: <span class="hljs-string">"./src/index.js"</span>,
    <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">publicPath</span>: <span class="hljs-string">"http://localhost:8080/"</span>,
        <span class="hljs-comment">//hotUpdateGlobal:'webpackHotUpdate',</span>
        <span class="hljs-comment">//chunkLoadingGlobal: 'webpackChunk'</span>
    },
    <span class="hljs-attr">devServer</span>: {
        <span class="hljs-attr">port</span>: <span class="hljs-number">3000</span>
    },
    <span class="hljs-attr">module</span>: {
        <span class="hljs-attr">rules</span>: [
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.jsx?$/</span>,
                <span class="hljs-attr">use</span>: {
                    <span class="hljs-attr">loader</span>: <span class="hljs-string">'babel-loader'</span>,
                    <span class="hljs-attr">options</span>: {
                        <span class="hljs-attr">presets</span>: [<span class="hljs-string">"@babel/preset-react"</span>]
                    },
                },
                <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
            },
        ]
    },
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-keyword">new</span> HtmlWebpackPlugin({
            <span class="hljs-attr">template</span>:<span class="hljs-string">'./public/index.html'</span>
        }),
        <span class="hljs-keyword">new</span> ModuleFederationPlugin({
            <span class="hljs-attr">filename</span>: <span class="hljs-string">"remoteEntry.js"</span>,
            <span class="hljs-attr">name</span>: <span class="hljs-string">"remote"</span>,
            <span class="hljs-attr">exposes</span>: {
                <span class="hljs-string">"./title"</span>: <span class="hljs-string">"./src/title"</span>,
            }
          })
    ]
}
</code></pre>
<h5 id="t337.1.1.2 Remote\src\index.js">7.1.1.2 Remote\src\index.js <a href="#t337.1.1.2 Remote\src\index.js"> # </a></h5>
<p>Remote\src\index.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span>(<span class="hljs-string">"./bootstrap"</span>);
</code></pre>
<h5 id="t347.1.1.3 Remote\src\bootstrap.js">7.1.1.3 Remote\src\bootstrap.js <a href="#t347.1.1.3 Remote\src\bootstrap.js"> # </a></h5>
<p>Remote\src\bootstrap.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> title <span class="hljs-keyword">from</span> <span class="hljs-string">"./title"</span>;
<span class="hljs-built_in">console</span>.log(title);
</code></pre>
<h5 id="t357.1.1.4 Remote\src\title.js">7.1.1.4 Remote\src\title.js <a href="#t357.1.1.4 Remote\src\title.js"> # </a></h5>
<p>Remote\src\title.js</p>
<pre><code class="lang-js"><span class="hljs-built_in">module</span>.exports = <span class="hljs-string">'title'</span>;
</code></pre>
<h4 id="t367.1.2 Host">7.1.2 Host <a href="#t367.1.2 Host"> # </a></h4>
<h5 id="t377.1.2.1 Host\webpack.config.js">7.1.2.1 Host\webpack.config.js <a href="#t377.1.2.1 Host\webpack.config.js"> # </a></h5>
<p>Host\webpack.config.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">let</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);
<span class="hljs-keyword">let</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">"webpack"</span>);
<span class="hljs-keyword">let</span> HtmlWebpackPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">"html-webpack-plugin"</span>);
<span class="hljs-keyword">const</span> ModuleFederationPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">"webpack/lib/container/ModuleFederationPlugin"</span>);
<span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-attr">mode</span>: <span class="hljs-string">"development"</span>,
    <span class="hljs-attr">entry</span>: <span class="hljs-string">"./src/index.js"</span>,
    <span class="hljs-attr">devtool</span>:<span class="hljs-literal">false</span>,
    <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">publicPath</span>: <span class="hljs-string">"http://localhost:8081/"</span>,
        <span class="hljs-attr">hotUpdateGlobal</span>:<span class="hljs-string">'webpackHotUpdate'</span>
    },
    <span class="hljs-attr">devServer</span>: {
        <span class="hljs-attr">port</span>: <span class="hljs-number">8000</span>
    },
    <span class="hljs-attr">module</span>: {
        <span class="hljs-attr">rules</span>: [
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.jsx?$/</span>,
                <span class="hljs-attr">use</span>: {
                    <span class="hljs-attr">loader</span>: <span class="hljs-string">'babel-loader'</span>,
                    <span class="hljs-attr">options</span>: {
                        <span class="hljs-attr">presets</span>: [<span class="hljs-string">"@babel/preset-react"</span>]
                    },
                },
                <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
            },
        ]
    },
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-keyword">new</span> HtmlWebpackPlugin({
            <span class="hljs-attr">template</span>: <span class="hljs-string">'./public/index.html'</span>
        }),
        <span class="hljs-keyword">new</span> ModuleFederationPlugin({
            <span class="hljs-attr">filename</span>: <span class="hljs-string">"remoteEntry.js"</span>,
            <span class="hljs-attr">name</span>: <span class="hljs-string">"host"</span>,
            <span class="hljs-attr">remotes</span>: {
                <span class="hljs-attr">remote</span>: <span class="hljs-string">"remoteVar@http://localhost:3000/remoteEntry.js"</span>
            }
        })
    ]
}
</code></pre>
<h5 id="t387.1.2.2 Host\src\index.js">7.1.2.2 Host\src\index.js <a href="#t387.1.2.2 Host\src\index.js"> # </a></h5>
<p>Host\src\index.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span>(<span class="hljs-string">"./bootstrap"</span>);
</code></pre>
<h5 id="t397.1.2.3 Host\src\bootstrap.js">7.1.2.3 Host\src\bootstrap.js <a href="#t397.1.2.3 Host\src\bootstrap.js"> # </a></h5>
<p>Host\src\bootstrap.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span>(<span class="hljs-string">"remote/title"</span>).then(<span class="hljs-function"><span class="hljs-params">result</span>=&gt;</span>{
    <span class="hljs-built_in">console</span>.log(result.default);
});
</code></pre>
<h3 id="t407.2 输出">7.2 输出 <a href="#t407.2 输出"> # </a></h3>
<h4 id="t417.2.1 Remote输出">7.2.1 Remote输出 <a href="#t417.2.1 Remote输出"> # </a></h4>
<h5 id="t427.2.1.1 Remote\dist\src_title_js.js">7.2.1.1 Remote\dist\src_title_js.js <a href="#t427.2.1.1 Remote\dist\src_title_js.js"> # </a></h5>
<p>Remote\dist\src_title_js.js</p>
<pre><code class="lang-js">(self[<span class="hljs-string">"webpackChunkRemote"</span>] = self[<span class="hljs-string">"webpackChunkRemote"</span>] || []).push([[<span class="hljs-string">"src_title_js"</span>], {
  <span class="hljs-string">"./src/title.js"</span>:
    <span class="hljs-function">(<span class="hljs-params">(<span class="hljs-built_in">module</span></span>) =&gt;</span> {
      <span class="hljs-built_in">module</span>.exports = <span class="hljs-string">'title'</span>;
    })
}]);
</code></pre>
<h5 id="t437.2.1.2 Remote\dist\src_bootstrap_js.js">7.2.1.2 Remote\dist\src_bootstrap_js.js <a href="#t437.2.1.2 Remote\dist\src_bootstrap_js.js"> # </a></h5>
<p>Remote\dist\src_bootstrap_js.js</p>
<pre><code class="lang-js">(self[<span class="hljs-string">"webpackChunkRemote"</span>] = self[<span class="hljs-string">"webpackChunkRemote"</span>] || []).push([[<span class="hljs-string">"src_bootstrap_js"</span>], {
  <span class="hljs-string">"./src/bootstrap.js"</span>:
    <span class="hljs-function">(<span class="hljs-params">(<span class="hljs-built_in">module</span>, exports, <span class="hljs-built_in">require</span></span>) =&gt;</span> {
      <span class="hljs-built_in">require</span>.r(exports);
      <span class="hljs-keyword">var</span> title = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./src/title.js"</span>);
      <span class="hljs-keyword">var</span> title_default = <span class="hljs-built_in">require</span>.n(title);
      <span class="hljs-built_in">console</span>.log((title_default()));
    }),
  <span class="hljs-string">"./src/title.js"</span>:
    <span class="hljs-function">(<span class="hljs-params">(<span class="hljs-built_in">module</span></span>) =&gt;</span> {
      <span class="hljs-built_in">module</span>.exports = <span class="hljs-string">'title'</span>;
    })
}]);
</code></pre>
<h5 id="t447.2.1.3 Remote\dist\remoteEntry.js">7.2.1.3 Remote\dist\remoteEntry.js <a href="#t447.2.1.3 Remote\dist\remoteEntry.js"> # </a></h5>
<p>Remote\dist\remoteEntry.js</p>
<pre><code class="lang-js"><span class="hljs-built_in">window</span>.remote =
    <span class="hljs-function">(<span class="hljs-params">(</span>) =&gt;</span> {
        <span class="hljs-keyword">var</span> modules = ({
            <span class="hljs-string">"webpack/container/entry/remote"</span>:
                <span class="hljs-function">(<span class="hljs-params">(<span class="hljs-built_in">module</span>, exports, <span class="hljs-built_in">require</span></span>) =&gt;</span> {
                    <span class="hljs-keyword">var</span> moduleMap = {
                        <span class="hljs-string">"./title"</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
                            <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>.e(<span class="hljs-string">"src_title_js"</span>).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">require</span>(<span class="hljs-string">"./src/title.js"</span>));
                        }
                    };
                    <span class="hljs-keyword">var</span> <span class="hljs-keyword">get</span> = (module) =&gt; {
                        <span class="hljs-keyword">return</span> moduleMap[<span class="hljs-built_in">module</span>]();
                    };
                    <span class="hljs-keyword">var</span> init = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
                        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.resolve();
                    };
                    <span class="hljs-built_in">require</span>.d(exports, {
                        <span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">get</span>,
                        init: () =&gt; init
                    });
                })
        });
        var cache = {};
        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">require</span>(<span class="hljs-params">moduleId</span>) </span>{
            <span class="hljs-keyword">if</span> (cache[moduleId]) {
                <span class="hljs-keyword">return</span> cache[moduleId].exports;
            }
            <span class="hljs-keyword">var</span> <span class="hljs-built_in">module</span> = cache[moduleId] = {
                <span class="hljs-attr">exports</span>: {}
            };
            modules[moduleId](<span class="hljs-built_in">module</span>, <span class="hljs-built_in">module</span>.exports, <span class="hljs-built_in">require</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">module</span>.exports;
        }
        <span class="hljs-built_in">require</span>.m = modules;
        <span class="hljs-built_in">require</span>.d = <span class="hljs-function">(<span class="hljs-params">exports, definition</span>) =&gt;</span> {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> definition) {
                <span class="hljs-built_in">Object</span>.defineProperty(exports, key, { <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">get</span>: definition[key] });
            }
        };
        <span class="hljs-built_in">require</span>.f = {};
        <span class="hljs-built_in">require</span>.e = <span class="hljs-function">(<span class="hljs-params">chunkId</span>) =&gt;</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all(<span class="hljs-built_in">Object</span>.keys(<span class="hljs-built_in">require</span>.f).reduce(<span class="hljs-function">(<span class="hljs-params">promises, key</span>) =&gt;</span> {
                <span class="hljs-built_in">require</span>.f[key](chunkId, promises);
                <span class="hljs-keyword">return</span> promises;
            }, []));
        };
        <span class="hljs-built_in">require</span>.u = <span class="hljs-function">(<span class="hljs-params">chunkId</span>) =&gt;</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span> + chunkId + <span class="hljs-string">".js"</span>;
        };
        <span class="hljs-built_in">require</span>.o = <span class="hljs-function">(<span class="hljs-params">obj, prop</span>) =&gt;</span> <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty.call(obj, prop)
        <span class="hljs-built_in">require</span>.l = <span class="hljs-function">(<span class="hljs-params">url</span>) =&gt;</span> {
            <span class="hljs-keyword">var</span> script = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'script'</span>);
            script.src = url;
            <span class="hljs-built_in">document</span>.head.appendChild(script);
        };
        <span class="hljs-built_in">require</span>.p = <span class="hljs-string">"http://localhost:8080/"</span>;
        <span class="hljs-keyword">var</span> installedChunks = {
            <span class="hljs-string">"remote"</span>: <span class="hljs-number">0</span>
        };
        <span class="hljs-built_in">require</span>.f.j = <span class="hljs-function">(<span class="hljs-params">chunkId, promises</span>) =&gt;</span> {
            <span class="hljs-keyword">var</span> installedChunkData = installedChunks[chunkId];
            <span class="hljs-keyword">if</span> (installedChunkData !== <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">if</span> (installedChunkData) {
                    promises.push(installedChunkData[<span class="hljs-number">2</span>]);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">var</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
                        installedChunkData = installedChunks[chunkId] = [resolve, reject];
                    });
                    promises.push(installedChunkData[<span class="hljs-number">2</span>] = promise);
                    <span class="hljs-keyword">var</span> url = <span class="hljs-built_in">require</span>.p + <span class="hljs-built_in">require</span>.u(chunkId);
                    <span class="hljs-built_in">require</span>.l(url);
                }
            }
        };
        <span class="hljs-keyword">var</span> webpackJsonpCallback = <span class="hljs-function">(<span class="hljs-params">parentChunkLoadingFunction,data</span>) =&gt;</span> {
            <span class="hljs-keyword">var</span> [chunkIds, moreModules] = data;
            <span class="hljs-keyword">var</span> moduleId, chunkId, i = <span class="hljs-number">0</span>, resolves = [];
            <span class="hljs-keyword">for</span> (; i &lt; chunkIds.length; i++) {
                chunkId = chunkIds[i];
                <span class="hljs-keyword">if</span> (installedChunks[chunkId]) {
                    resolves.push(installedChunks[chunkId][<span class="hljs-number">0</span>]);
                }
                installedChunks[chunkId] = <span class="hljs-number">0</span>;
            }
            <span class="hljs-keyword">for</span> (moduleId <span class="hljs-keyword">in</span> moreModules) {
                <span class="hljs-built_in">require</span>.m[moduleId] = moreModules[moduleId];
            }
            <span class="hljs-keyword">if</span> (parentChunkLoadingFunction) parentChunkLoadingFunction(data);
            <span class="hljs-keyword">while</span> (resolves.length) {
                resolves.shift()();
            }
        }
        <span class="hljs-keyword">var</span> chunkLoadingGlobal = self[<span class="hljs-string">"webpackChunkRemote"</span>] = self[<span class="hljs-string">"webpackChunkRemote"</span>] || [];
        chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(<span class="hljs-literal">null</span>, <span class="hljs-number">0</span>));
        chunkLoadingGlobal.push = webpackJsonpCallback.bind(<span class="hljs-literal">null</span>, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>(<span class="hljs-string">"webpack/container/entry/remote"</span>);
    })();
</code></pre>
<h5 id="t457.2.1.4 Remote\dist\main.js">7.2.1.4 Remote\dist\main.js <a href="#t457.2.1.4 Remote\dist\main.js"> # </a></h5>
<p>Remote\dist\main.js</p>
<pre><code class="lang-js">(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">var</span> modules = ({});
  <span class="hljs-keyword">var</span> cache = {};
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">require</span>(<span class="hljs-params">moduleId</span>) </span>{
    <span class="hljs-keyword">if</span> (cache[moduleId]) {
      <span class="hljs-keyword">return</span> cache[moduleId].exports;
    }
    <span class="hljs-keyword">var</span> <span class="hljs-built_in">module</span> = cache[moduleId] = {
      <span class="hljs-attr">exports</span>: {}
    };
    modules[moduleId](<span class="hljs-built_in">module</span>, <span class="hljs-built_in">module</span>.exports, <span class="hljs-built_in">require</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">module</span>.exports;
  }
  <span class="hljs-built_in">require</span>.m = modules;
  <span class="hljs-built_in">require</span>.n = <span class="hljs-function">(<span class="hljs-params"><span class="hljs-built_in">module</span></span>) =&gt;</span> {
    <span class="hljs-keyword">var</span> getter = <span class="hljs-built_in">module</span> &amp;&amp; <span class="hljs-built_in">module</span>.__esModule ?
      <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">module</span>[<span class="hljs-string">'default'</span>] :
      <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">module</span>;
    <span class="hljs-built_in">require</span>.d(getter, { <span class="hljs-attr">a</span>: getter });
    <span class="hljs-keyword">return</span> getter;
  };
  <span class="hljs-built_in">require</span>.d = <span class="hljs-function">(<span class="hljs-params">exports, definition</span>) =&gt;</span> {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> definition) {
      <span class="hljs-built_in">Object</span>.defineProperty(exports, key, { <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">get</span>: definition[key] });
    }
  };
  <span class="hljs-built_in">require</span>.f = {};
  <span class="hljs-built_in">require</span>.e = <span class="hljs-function">(<span class="hljs-params">chunkId</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all(<span class="hljs-built_in">Object</span>.keys(<span class="hljs-built_in">require</span>.f).reduce(<span class="hljs-function">(<span class="hljs-params">promises, key</span>) =&gt;</span> {
      <span class="hljs-built_in">require</span>.f[key](chunkId, promises);
      <span class="hljs-keyword">return</span> promises;
    }, []));
  };
  <span class="hljs-built_in">require</span>.u = <span class="hljs-function">(<span class="hljs-params">chunkId</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">""</span> + chunkId + <span class="hljs-string">".js"</span>;
  };
  <span class="hljs-built_in">require</span>.l = <span class="hljs-function">(<span class="hljs-params">url</span>) =&gt;</span> {
    <span class="hljs-keyword">var</span> script = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'script'</span>);
    script.src = url;
    <span class="hljs-built_in">document</span>.head.appendChild(script);
  };
  <span class="hljs-built_in">require</span>.r = <span class="hljs-function">(<span class="hljs-params">exports</span>) =&gt;</span> {
    <span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-built_in">Symbol</span>.toStringTag, { <span class="hljs-attr">value</span>: <span class="hljs-string">'Module'</span> });
    <span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-string">'__esModule'</span>, { <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span> });
  };
  <span class="hljs-built_in">require</span>.p = <span class="hljs-string">"http://localhost:8080/"</span>;
  <span class="hljs-keyword">var</span> installedChunks = {
    <span class="hljs-string">"main"</span>: <span class="hljs-number">0</span>
  };
  <span class="hljs-built_in">require</span>.f.j = <span class="hljs-function">(<span class="hljs-params">chunkId, promises</span>) =&gt;</span> {
    <span class="hljs-keyword">var</span> installedChunkData = installedChunks[chunkId];
    <span class="hljs-keyword">if</span> (installedChunkData !== <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">if</span> (installedChunkData) {
        promises.push(installedChunkData[<span class="hljs-number">2</span>]);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">var</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
          installedChunkData = installedChunks[chunkId] = [resolve, reject];
        });
        promises.push(installedChunkData[<span class="hljs-number">2</span>] = promise);
        <span class="hljs-keyword">var</span> url = <span class="hljs-built_in">require</span>.p + <span class="hljs-built_in">require</span>.u(chunkId);
        <span class="hljs-built_in">require</span>.l(url);
      }
    }
  };
  <span class="hljs-keyword">var</span> webpackJsonpCallback = <span class="hljs-function">(<span class="hljs-params">parentChunkLoadingFunction,data</span>) =&gt;</span> {
    <span class="hljs-keyword">var</span> [chunkIds, moreModules] = data;
    <span class="hljs-keyword">var</span> moduleId, chunkId, i = <span class="hljs-number">0</span>, resolves = [];
    <span class="hljs-keyword">for</span> (; i &lt; chunkIds.length; i++) {
      chunkId = chunkIds[i];
      <span class="hljs-keyword">if</span> (installedChunks[chunkId]) {
        resolves.push(installedChunks[chunkId][<span class="hljs-number">0</span>]);
      }
      installedChunks[chunkId] = <span class="hljs-number">0</span>;
    }
    <span class="hljs-keyword">for</span> (moduleId <span class="hljs-keyword">in</span> moreModules) {
      <span class="hljs-built_in">require</span>.m[moduleId] = moreModules[moduleId];
    }
    <span class="hljs-keyword">if</span> (parentChunkLoadingFunction) parentChunkLoadingFunction(data);
    <span class="hljs-keyword">while</span> (resolves.length) {
      resolves.shift()();
    }
  }
  <span class="hljs-keyword">var</span> chunkLoadingGlobal = self[<span class="hljs-string">"webpackChunkRemote"</span>] = self[<span class="hljs-string">"webpackChunkRemote"</span>] || [];
  chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(<span class="hljs-literal">null</span>, <span class="hljs-number">0</span>));
        chunkLoadingGlobal.push = webpackJsonpCallback.bind(<span class="hljs-literal">null</span>, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
  <span class="hljs-built_in">require</span>.e(<span class="hljs-string">"src_bootstrap_js"</span>).then(<span class="hljs-built_in">require</span>.bind(<span class="hljs-built_in">require</span>, <span class="hljs-string">"./src/bootstrap.js"</span>));
})();
</code></pre>
<h5 id="t467.2.1.5 Remote\dist\index.html">7.2.1.5 Remote\dist\index.html <a href="#t467.2.1.5 Remote\dist\index.html"> # </a></h5>
<p>Remote\dist\index.html</p>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"root"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"http://localhost:8080/main.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"http://localhost:8080/remoteEntry.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 id="t477.2.2 Host输出">7.2.2 Host输出 <a href="#t477.2.2 Host输出"> # </a></h4>
<h5 id="t487.2.2.1 Host\dist\src_bootstrap_js.js">7.2.2.1 Host\dist\src_bootstrap_js.js <a href="#t487.2.2.1 Host\dist\src_bootstrap_js.js"> # </a></h5>
<p>Host\dist\src_bootstrap_js.js</p>
<pre><code class="lang-js">(self[<span class="hljs-string">"webpackChunkHost"</span>] = self[<span class="hljs-string">"webpackChunkHost"</span>] || []).push([[<span class="hljs-string">"src_bootstrap_js"</span>], {
  <span class="hljs-string">"./src/bootstrap.js"</span>:
    <span class="hljs-function">(<span class="hljs-params">(<span class="hljs-built_in">module</span>, exports, <span class="hljs-built_in">require</span></span>) =&gt;</span> {
      <span class="hljs-built_in">require</span>.e(<span class="hljs-string">"webpack_container_remote_remote_title"</span>).then(<span class="hljs-built_in">require</span>.t.bind(<span class="hljs-built_in">require</span>, <span class="hljs-string">"webpack/container/remote/remote/title"</span>)).then(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
        <span class="hljs-built_in">console</span>.log(result.default);
      });
    })
}]);
</code></pre>
<h5 id="t497.2.2.2 Host\dist\main.js">7.2.2.2 Host\dist\main.js <a href="#t497.2.2.2 Host\dist\main.js"> # </a></h5>
<p>Host\dist\main.js</p>
<pre><code class="lang-js">(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">var</span> modules = ({
        <span class="hljs-string">"webpack/container/reference/remote"</span>:
            <span class="hljs-function">(<span class="hljs-params">(<span class="hljs-built_in">module</span>, exports, <span class="hljs-built_in">require</span></span>) =&gt;</span> {
                <span class="hljs-built_in">module</span>.exports = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
                    <span class="hljs-built_in">require</span>.l(<span class="hljs-string">"http://localhost:8080/remoteEntry.js"</span>,resolve);
                }).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> remote);
            })
    });
    <span class="hljs-keyword">var</span> cache = {};
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">require</span>(<span class="hljs-params">moduleId</span>) </span>{
        <span class="hljs-keyword">if</span> (cache[moduleId]) {
            <span class="hljs-keyword">return</span> cache[moduleId].exports;
        }
        <span class="hljs-keyword">var</span> <span class="hljs-built_in">module</span> = cache[moduleId] = {
            <span class="hljs-attr">exports</span>: {}
        };
        modules[moduleId](<span class="hljs-built_in">module</span>, <span class="hljs-built_in">module</span>.exports, <span class="hljs-built_in">require</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">module</span>.exports;
    }
    <span class="hljs-built_in">require</span>.m = modules;
    <span class="hljs-built_in">require</span>.t = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) </span>{
        value = <span class="hljs-keyword">this</span>(value);
        <span class="hljs-keyword">var</span> ns = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);
        <span class="hljs-built_in">require</span>.r(ns);
        <span class="hljs-keyword">var</span> def = { <span class="hljs-string">'default'</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> value };
        <span class="hljs-built_in">require</span>.d(ns, def);
        <span class="hljs-keyword">return</span> ns;
    };
    <span class="hljs-built_in">require</span>.d = <span class="hljs-function">(<span class="hljs-params">exports, definition</span>) =&gt;</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> definition) {
            <span class="hljs-built_in">Object</span>.defineProperty(exports, key, { <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">get</span>: definition[key] });
        }
    };
    <span class="hljs-built_in">require</span>.f = {};
    <span class="hljs-built_in">require</span>.e = <span class="hljs-function">(<span class="hljs-params">chunkId</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all(<span class="hljs-built_in">Object</span>.keys(<span class="hljs-built_in">require</span>.f).reduce(<span class="hljs-function">(<span class="hljs-params">promises, key</span>) =&gt;</span> {
            <span class="hljs-built_in">require</span>.f[key](chunkId, promises);
            <span class="hljs-keyword">return</span> promises;
        }, []));
    };
    <span class="hljs-built_in">require</span>.u = <span class="hljs-function">(<span class="hljs-params">chunkId</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span> + chunkId + <span class="hljs-string">".js"</span>;
    };
    <span class="hljs-built_in">require</span>.l = <span class="hljs-function">(<span class="hljs-params">url, done</span>) =&gt;</span> {
        <span class="hljs-keyword">var</span> script = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'script'</span>);
        script.src = url;
        script.onload = done
        <span class="hljs-built_in">document</span>.head.appendChild(script);
    };
    <span class="hljs-built_in">require</span>.r = <span class="hljs-function">(<span class="hljs-params">exports</span>) =&gt;</span> {
        <span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-built_in">Symbol</span>.toStringTag, { <span class="hljs-attr">value</span>: <span class="hljs-string">'Module'</span> });
        <span class="hljs-built_in">Object</span>.defineProperty(exports, <span class="hljs-string">'__esModule'</span>, { <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span> });
    };
    <span class="hljs-keyword">var</span> chunkMapping = {
        <span class="hljs-string">"webpack_container_remote_remote_title"</span>: [
            <span class="hljs-string">"webpack/container/remote/remote/title"</span>
        ]
    };
    <span class="hljs-keyword">var</span> idToExternalAndNameMapping = {
        <span class="hljs-string">"webpack/container/remote/remote/title"</span>: [
            <span class="hljs-string">"./title"</span>,
            <span class="hljs-string">"webpack/container/reference/remote"</span>
        ]
    };
    <span class="hljs-built_in">require</span>.f.remotes = <span class="hljs-function">(<span class="hljs-params">chunkId,promises</span>) =&gt;</span> {
        chunkMapping[chunkId] &amp;&amp; chunkMapping[chunkId].forEach(<span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> {
            <span class="hljs-keyword">var</span> [remoteModuleName,moduleId] = idToExternalAndNameMapping[id];
            <span class="hljs-keyword">let</span> promise = <span class="hljs-built_in">require</span>(moduleId).then(<span class="hljs-function"><span class="hljs-params">external</span>=&gt;</span>{
                <span class="hljs-keyword">return</span> external.init().then(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>{
                    <span class="hljs-keyword">return</span> external.get(remoteModuleName).then(<span class="hljs-function">(<span class="hljs-params">factory</span>)=&gt;</span>{
                        <span class="hljs-keyword">return</span> modules[id] = <span class="hljs-function">(<span class="hljs-params"><span class="hljs-built_in">module</span></span>) =&gt;</span> {
                            <span class="hljs-built_in">module</span>.exports = factory();
                        }
                    });
                });
            })
            promises.push(promise);
        });
    }
    <span class="hljs-built_in">require</span>.p = <span class="hljs-string">"http://localhost:8081/"</span>;
    <span class="hljs-keyword">var</span> installedChunks = {
        <span class="hljs-string">"main"</span>: <span class="hljs-number">0</span>
    };
    <span class="hljs-built_in">require</span>.f.j = <span class="hljs-function">(<span class="hljs-params">chunkId, promises</span>) =&gt;</span> {
        <span class="hljs-keyword">var</span> installedChunkData;
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"src_bootstrap_js"</span> == chunkId) {
            <span class="hljs-keyword">var</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
                installedChunkData = installedChunks[chunkId] = [resolve, reject];
            });
            promises.push(installedChunkData[<span class="hljs-number">2</span>] = promise);
            <span class="hljs-keyword">var</span> url = <span class="hljs-built_in">require</span>.p + <span class="hljs-built_in">require</span>.u(chunkId);
            <span class="hljs-built_in">require</span>.l(url);
        } <span class="hljs-keyword">else</span> {
            installedChunks[chunkId] = <span class="hljs-number">0</span>;
        }
    };
    <span class="hljs-keyword">var</span> webpackJsonpCallback = <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
        <span class="hljs-keyword">var</span> [chunkIds, moreModules] = data;
        <span class="hljs-keyword">var</span> moduleId, chunkId, i = <span class="hljs-number">0</span>, resolves = [];
        <span class="hljs-keyword">for</span> (; i &lt; chunkIds.length; i++) {
            chunkId = chunkIds[i];
            <span class="hljs-keyword">if</span> (installedChunks[chunkId]) {
                resolves.push(installedChunks[chunkId][<span class="hljs-number">0</span>]);
            }
            installedChunks[chunkId] = <span class="hljs-number">0</span>;
        }
        <span class="hljs-keyword">for</span> (moduleId <span class="hljs-keyword">in</span> moreModules) {
            <span class="hljs-built_in">require</span>.m[moduleId] = moreModules[moduleId];
        }
        <span class="hljs-keyword">while</span> (resolves.length) {
            resolves.shift()();
        }
    }
    <span class="hljs-keyword">var</span> chunkLoadingGlobal = self[<span class="hljs-string">"webpackChunkHost"</span>] = self[<span class="hljs-string">"webpackChunkHost"</span>] || [];
    chunkLoadingGlobal.push = webpackJsonpCallback;
    <span class="hljs-built_in">require</span>.e(<span class="hljs-string">"src_bootstrap_js"</span>).then(<span class="hljs-built_in">require</span>.t.bind(<span class="hljs-built_in">require</span>, <span class="hljs-string">"./src/bootstrap.js"</span>));
})();
</code></pre>
<h5 id="t507.2.2.3 Host\dist\index.html">7.2.2.3 Host\dist\index.html <a href="#t507.2.2.3 Host\dist\index.html"> # </a></h5>
<p>Host\dist\index.html</p>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"root"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"http://localhost:8081/main.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>

    