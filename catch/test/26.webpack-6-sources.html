
        <p>﻿</p>
<h2 id="t01. 初始化项目">1. 初始化项目 <a href="#t01. 初始化项目"> # </a></h2>
<pre><code class="lang-js">doskey /history
mkdir webpack-source
cd webpack-source
npm init -y
cnpm i webpack webpack-cli -D
cnpm i lodash -S
npx webpack
</code></pre>
<h2 id="t12.配置文件">2.配置文件 <a href="#t12.配置文件"> # </a></h2>
<h3 id="t22.1 src\index.js">2.1 src\index.js <a href="#t22.1 src\index.js"> # </a></h3>
<p>src\index.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">'lodash'</span>;
<span class="hljs-built_in">console</span>.log(_.isArray([]));
</code></pre>
<h3 id="t32.2 webpack.config.js">2.2 webpack.config.js <a href="#t32.2 webpack.config.js"> # </a></h3>
<p>webpack.config.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-attr">mode</span>:<span class="hljs-string">'development'</span>,
    <span class="hljs-attr">entry</span>: <span class="hljs-string">'./src/index.js'</span>,
    <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">path</span>:path.join(__dirname,<span class="hljs-string">'dist'</span>),
        <span class="hljs-attr">filename</span>: <span class="hljs-string">'bundle.js'</span>
    }
};
</code></pre>
<h2 id="t43.可执行命令">3.可执行命令 <a href="#t43.可执行命令"> # </a></h2>
<ul>
<li><a href="https://webpack.js.org/api/cli/">cli</a></li>
</ul>
<h3 id="t53.1 直接调用">3.1 直接调用 <a href="#t53.1 直接调用"> # </a></h3>
<ul>
<li>可以直接打开<code>node_modules\webpack-cli\bin\cli.js</code>文件</li>
<li>然后直接打开调试窗口，然后点击启动编译就可以了</li>
</ul>
<h3 id="t63.2 如何生成调试文件">3.2 如何生成调试文件 <a href="#t63.2 如何生成调试文件"> # </a></h3>
<ul>
<li>打开工程目录，点击调试按钮，再点击小齿轮的配置按钮系统就会生成launch.json配置文件</li>
<li>修改好了以后直接点击F5就可以启动调试</li>
</ul>
<p>.vscode\launch.json</p>
<pre><code class="lang-json">{
    <span class="hljs-attr">"version"</span>: <span class="hljs-string">"0.2.0"</span>,
    <span class="hljs-attr">"configurations"</span>: [
        {
            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"node"</span>,
            <span class="hljs-attr">"request"</span>: <span class="hljs-string">"launch"</span>,
            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"debug webpack"</span>,
            <span class="hljs-attr">"cwd"</span>: <span class="hljs-string">"${workspaceFolder}"</span>,
            <span class="hljs-attr">"program"</span>: <span class="hljs-string">"${workspaceFolder}/node_modules/_webpack-cli@3.3.10@webpack-cli/bin/cli.js"</span>
        }
    ]
}
</code></pre>
<h3 id="t73.2 webpack.cmd">3.2 webpack.cmd <a href="#t73.2 webpack.cmd"> # </a></h3>
<p>webpack-source\node_modules.bin\webpack.cmd</p>
<ul>
<li><code>%~dp0</code>是批处理文件所在的盘符:+路径(%~dp0 C:\vipdata\vipproject\webpack-source\node_modules.bin)</li>
<li><code>SETLOCAL</code>主要针对临时环境变量，不会影响到系统的变量环境设置，应与endlocal联用</li>
<li><code>PATHEXT</code>当在一个相同的目录结构下，有相同的多个主文件名，不同的文件后缀名时，系统会根据PATHEXT中的后缀名，选择其中顺序最靠前的那一个<pre><code class="lang-js">@IF EXIST <span class="hljs-string">"%~dp0\node.exe"</span> (<span class="hljs-comment">//如果当前盘符的根目录下存在node.exe,用当前的node执行</span>
<span class="hljs-string">"%~dp0\node.exe"</span>  <span class="hljs-string">"%~dp0\..\_webpack@4.39.3@webpack\bin\webpack.js"</span> %*
) ELSE (<span class="hljs-comment">//如果当前的盘符没有node.exe</span>
@SETLOCAL
@SET PATHEXT=%PATHEXT:;.JS;=;%
node  <span class="hljs-string">"%~dp0\..\_webpack@4.39.3@webpack\bin\webpack.js"</span> %*
)
</code></pre>
</li>
</ul>
<h3 id="t83.3 webpack.js">3.3 webpack.js <a href="#t83.3 webpack.js"> # </a></h3>
<p>node_modules\webpack\bin\webpack.js</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);
<span class="hljs-keyword">const</span> pkgPath = <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">`<span class="hljs-subst">${installedClis[<span class="hljs-number">0</span>].package}</span>/package.json`</span>);
    <span class="hljs-comment">// eslint-disable-next-line node/no-missing-require</span>
<span class="hljs-keyword">const</span> pkg = <span class="hljs-built_in">require</span>(pkgPath);
    <span class="hljs-comment">// eslint-disable-next-line node/no-missing-require</span>
<span class="hljs-built_in">require</span>(path.resolve(
    path.dirname(pkgPath),
    pkg.bin[installedClis[<span class="hljs-number">0</span>].binName]
));
</code></pre>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);
<span class="hljs-keyword">const</span> pkgPath = <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">`webpack-cli/package.json`</span>);
<span class="hljs-keyword">const</span> pkg = <span class="hljs-built_in">require</span>(pkgPath);
<span class="hljs-built_in">require</span>(path.resolve(path.dirname(pkgPath),pkg.bin[<span class="hljs-string">'webpack-cli'</span>]));
</code></pre>
<ul>
<li>npx webpack就相当于用node执行cli.js脚本</li>
</ul>
<pre><code class="lang-js">npx webpack = node ./node_modules/webpack-cli/bin/cli.js
</code></pre>
<h3 id="t93.4 阅读思路">3.4 阅读思路 <a href="#t93.4 阅读思路"> # </a></h3>
<ul>
<li>先折叠无关的分支的逻辑，只看主体流程代码</li>
<li>寻找关键路径，根据变量名和方法名猜测意图，然后通过阅读源码来验证想法</li>
<li>debugger关键路径，理解整个执行过程 </li>
</ul>
<h3 id="t103.5 重要文件">3.5 重要文件 <a href="#t103.5 重要文件"> # </a></h3>
<ul>
<li>Webpack 类似于一个公司</li>
<li>Compiler 类似于公司的董事长，只把握战略方向</li>
<li>Compilation 就像各个事业部的总监,负责各个部门的管理</li>
<li>ModuleFactory 就像各个具体部门了,负责具体工作产出产品</li>
</ul>
<h2 id="t114.启动编译">4.启动编译 <a href="#t114.启动编译"> # </a></h2>
<ul>
<li>Compiler和Compilation都继承自Tapable</li>
<li>Compiler是每个Webpack配置对应一个Compiler对象，记录着Webpack的生命周期</li>
<li>在构建的过程中，每次构建都会产生一个Compilation,Compilation是构建周期的产物</li>
<li>Compiler模块是Webpack最核心的模块</li>
<li>每次执行构建的时候，都会先实例化一个 Compiler对象，然后调用它的<code>run</code>方法来开启一次完整的编译</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">说明</th>
<th style="text-align:left">代码</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1.读取配置文件</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack-cli/blob/v3.3.7/bin/utils/convert-argv.js#L125">requireConfig</a></td>
</tr>
<tr>
<td style="text-align:left">2.创建compiler</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack-cli/blob/v3.3.7/bin/cli.js#L272">webpack(options)</a></td>
</tr>
<tr>
<td style="text-align:left">3.开始编译</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack-cli/blob/v3.3.7/bin/cli.js#L352">compiler.run</a></td>
</tr>
</tbody>
</table>
<pre><code class="lang-js">node debug.js
</code></pre>
<p>debug.js</p>
<pre><code class="lang-js"> <span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">"webpack"</span>);
 <span class="hljs-keyword">const</span> config = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./webpack.config.js'</span>);<span class="hljs-comment">//1.读取配置文件</span>
 <span class="hljs-keyword">const</span> compiler = webpack(config);
 <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compilerCallback</span>(<span class="hljs-params">err, stats</span>) </span>{
     <span class="hljs-keyword">const</span> statsString = stats.toString();
     <span class="hljs-built_in">console</span>.log(statsString);
 }
 compiler.run(<span class="hljs-function">(<span class="hljs-params">err,stats</span>)=&gt;</span>{
     compilerCallback(err, stats);
 });

</code></pre>
<h2 id="t125.钩子">5.钩子 <a href="#t125.钩子"> # </a></h2>
<h3 id="t135.1 Compiler">5.1 Compiler <a href="#t135.1 Compiler"> # </a></h3>
<ul>
<li>L106</li>
</ul>
<pre><code class="lang-diff">            entryOption: new SyncBailHook(["context", "entry"])
        };
<span class="hljs-addition">+        Object.keys(this.hooks).forEach(hookName =&gt; {</span>
<span class="hljs-addition">+            const hook = this.hooks[hookName];</span>
<span class="hljs-addition">+            if (hook.tap) {</span>
<span class="hljs-addition">+                hook.tap('flow', () =&gt; {</span>
<span class="hljs-addition">+                    console.log(`|compiler|${hookName}|${Object.getPrototypeOf(hook).constructor.name}|${hook._args}|`);</span>
<span class="hljs-addition">+                });</span>
<span class="hljs-addition">+            }</span>
<span class="hljs-addition">+        });</span>
</code></pre>
<h3 id="t145.2 Compilation">5.2 Compilation <a href="#t145.2 Compilation"> # </a></h3>
<ul>
<li>L437</li>
</ul>
<pre><code class="lang-diff">            afterOptimizeExtractedChunks: new SyncHook(["chunks"])
        };
<span class="hljs-addition">+        Object.keys(this.hooks).forEach(hookName =&gt; {</span>
<span class="hljs-addition">+            const hook = this.hooks[hookName];</span>
<span class="hljs-addition">+            if (hook.tap) {</span>
<span class="hljs-addition">+                hook.tap('flow', () =&gt; {</span>
<span class="hljs-addition">+                    console.log(`|compilation|${hookName}|${Object.getPrototypeOf(hook).constructor.name}|${hook._args}|`);</span>
<span class="hljs-addition">+                });</span>
<span class="hljs-addition">+            }</span>
<span class="hljs-addition">+        });</span>
        this._pluginCompat.tap("Compilation", options =&gt; {
</code></pre>
<pre><code class="lang-js">|compiler|environment|SyncHook||
|compiler|afterEnvironment|SyncHook||
|compiler|entryOption|SyncBailHook|context,entry|
|compiler|afterPlugins|SyncHook|compiler|
|compiler|afterResolvers|SyncHook|compiler|
|compiler|beforeRun|AsyncSeriesHook|compiler|
|compiler|run|AsyncSeriesHook|compiler|
|compiler|normalModuleFactory|SyncHook|normalModuleFactory|
|compiler|contextModuleFactory|SyncHook|contextModulefactory|
|compiler|beforeCompile|AsyncSeriesHook|params|
|compiler|compile|SyncHook|params|
|compiler|thisCompilation|SyncHook|compilation,params|
|compiler|compilation|SyncHook|compilation,params|
|compiler|make|AsyncParallelHook|compilation|
|compilation|addEntry|SyncHook|entry,name|
|compilation|buildModule|SyncHook|<span class="hljs-built_in">module</span>|
|compilation|normalModuleLoader|SyncHook|loaderContext,<span class="hljs-built_in">module</span>|
|compilation|succeedModule|SyncHook|<span class="hljs-built_in">module</span>|
|compilation|buildModule|SyncHook|<span class="hljs-built_in">module</span>|
|compilation|normalModuleLoader|SyncHook|loaderContext,<span class="hljs-built_in">module</span>|
|compilation|succeedModule|SyncHook|<span class="hljs-built_in">module</span>|
|compilation|buildModule|SyncHook|<span class="hljs-built_in">module</span>|
|compilation|normalModuleLoader|SyncHook|loaderContext,<span class="hljs-built_in">module</span>|
|compilation|buildModule|SyncHook|<span class="hljs-built_in">module</span>|
|compilation|normalModuleLoader|SyncHook|loaderContext,<span class="hljs-built_in">module</span>|
|compilation|succeedModule|SyncHook|<span class="hljs-built_in">module</span>|
|compilation|succeedModule|SyncHook|<span class="hljs-built_in">module</span>|
|compilation|succeedEntry|SyncHook|entry,name,<span class="hljs-built_in">module</span>|
|compilation|finishModules|AsyncSeriesHook|modules|
|compilation|seal|SyncHook||
|compilation|optimizeDependenciesBasic|SyncBailHook|modules|
|compilation|optimizeDependencies|SyncBailHook|modules|
|compilation|optimizeDependenciesAdvanced|SyncBailHook|modules|
|compilation|afterOptimizeDependencies|SyncHook|modules|
|compilation|beforeChunks|SyncHook||
|compilation|dependencyReference|SyncWaterfallHook|dependencyReference,d
|compilation|dependencyReference|SyncWaterfallHook|dependencyReference,d
|compilation|dependencyReference|SyncWaterfallHook|dependencyReference,d
|compilation|dependencyReference|SyncWaterfallHook|dependencyReference,d
|compilation|log|SyncBailHook|origin,logEntry|
|compilation|log|SyncBailHook|origin,logEntry|
|compilation|afterChunks|SyncHook|chunks|
|compilation|optimize|SyncHook||
|compilation|optimizeModulesBasic|SyncBailHook|modules|
|compilation|optimizeModules|SyncBailHook|modules|
|compilation|optimizeModulesAdvanced|SyncBailHook|modules|
|compilation|afterOptimizeModules|SyncHook|modules|
|compilation|optimizeChunksBasic|SyncBailHook|chunks,chunkGroups|
|compilation|optimizeChunks|SyncBailHook|chunks,chunkGroups|
|compilation|optimizeChunksAdvanced|SyncBailHook|chunks,chunkGroups|
|compilation|afterOptimizeChunks|SyncHook|chunks,chunkGroups|
|compilation|optimizeTree|AsyncSeriesHook|chunks,modules|
|compilation|afterOptimizeTree|SyncHook|chunks,modules|
|compilation|optimizeChunkModulesBasic|SyncBailHook|chunks,modules|
|compilation|optimizeChunkModules|SyncBailHook|chunks,modules|
|compilation|optimizeChunkModulesAdvanced|SyncBailHook|chunks,modules|
|compilation|afterOptimizeChunkModules|SyncHook|chunks,modules|
|compilation|shouldRecord|SyncBailHook||
|compilation|reviveModules|SyncHook|modules,records|
|compilation|optimizeModuleOrder|SyncHook|modules|
|compilation|advancedOptimizeModuleOrder|SyncHook|modules|
|compilation|beforeModuleIds|SyncHook|modules|
|compilation|moduleIds|SyncHook|modules|
|compilation|optimizeModuleIds|SyncHook|modules|
|compilation|afterOptimizeModuleIds|SyncHook|modules|
|compilation|reviveChunks|SyncHook|chunks,records|
|compilation|optimizeChunkOrder|SyncHook|chunks|
|compilation|beforeChunkIds|SyncHook|chunks|
|compilation|optimizeChunkIds|SyncHook|chunks|
|compilation|afterOptimizeChunkIds|SyncHook|chunks|
|compilation|recordModules|SyncHook|modules,records|
|compilation|recordChunks|SyncHook|chunks,records|
|compilation|beforeHash|SyncHook||
|compilation|chunkHash|SyncHook|chunk,chunkHash|
|compilation|contentHash|SyncHook|chunk|
|compilation|afterHash|SyncHook||
|compilation|recordHash|SyncHook|records|
|compilation|beforeModuleAssets|SyncHook||
|compilation|shouldGenerateChunkAssets|SyncBailHook||
|compilation|beforeChunkAssets|SyncHook||
|compilation|chunkAsset|SyncHook|chunk,filename|
|compilation|additionalChunkAssets|SyncHook|chunks|
|compilation|record|SyncHook|compilation,records|
|compilation|additionalAssets|AsyncSeriesHook||
|compilation|optimizeChunkAssets|AsyncSeriesHook|chunks|
|compilation|afterOptimizeChunkAssets|SyncHook|chunks|
|compilation|optimizeAssets|AsyncSeriesHook|assets|
|compilation|afterOptimizeAssets|SyncHook|assets|
|compilation|needAdditionalSeal|SyncBailHook||
|compilation|afterSeal|AsyncSeriesHook||
|compiler|afterCompile|AsyncSeriesHook|compilation|
|compiler|shouldEmit|SyncBailHook|compilation|
|compiler|emit|AsyncSeriesHook|compilation|
|compiler|assetEmitted|AsyncSeriesHook|file,content|
|compiler|afterEmit|AsyncSeriesHook|compilation|
|compilation|needAdditionalPass|SyncBailHook||
|compiler|done|AsyncSeriesHook|stats|
</code></pre>
<table>
<thead>
<tr>
<th style="text-align:left">类型</th>
<th style="text-align:left">事件名称</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">参数</th>
<th style="text-align:left">说明</th>
<th style="text-align:left">发射事件代码</th>
<th style="text-align:left">对应插件</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">environment</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">空</td>
<td style="text-align:left">准备编译环境，webpack plugins配置初始化完成之后</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/webpack.js#L55">webpack.js#L55</a></td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/node/NodeEnvironmentPlugin.js">NodeEnvironmentPlugin</a></td>
</tr>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">afterEnvironment</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">空</td>
<td style="text-align:left">编译环境准备好之后</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/webpack.js#L56">webpack.js#L56</a></td>
</tr>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">entryOption</td>
<td style="text-align:left">SyncBailHook</td>
<td style="text-align:left">context,entry</td>
<td style="text-align:left">在 webpack 中的 entry 配置处理过之后</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/WebpackOptionsApply.js#L291">WebpackOptionsApply.js#L291</a></td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/EntryOptionPlugin.js">EntryOptionPlugin</a>,<a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/SingleEntryPlugin.js">SingleEntryPlugin</a></td>
</tr>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">afterPlugins</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">compiler</td>
<td style="text-align:left">初始化完内置插件之后</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/WebpackOptionsApply.js#L506">WebpackOptionsApply.js#L506</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">afterResolvers</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">compiler</td>
<td style="text-align:left">resolver 完成之后</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/WebpackOptionsApply.js#L541">WebpackOptionsApply.js#L541</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">beforeRun</td>
<td style="text-align:left">AsyncSeriesHook</td>
<td style="text-align:left">compiler</td>
<td style="text-align:left">开始正式编译之前</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compiler.js#L312">Compiler.js#L312</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">run</td>
<td style="text-align:left">AsyncSeriesHook</td>
<td style="text-align:left">compiler</td>
<td style="text-align:left">开始编译之后，读取 records 之前；监听模式触发watch-run</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compiler.js#L315">Compiler.js#L315</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">normalModuleFactory</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">normalModuleFactory</td>
<td style="text-align:left">NormalModuleFactory 创建之后</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compiler.js#L631">Compiler.js#L631</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">contextModuleFactory</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">contextModulefactory</td>
<td style="text-align:left">ContextModuleFactory 创建之后</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compiler.js#L637">Compiler.js#L631</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">beforeCompile</td>
<td style="text-align:left">AsyncSeriesHook</td>
<td style="text-align:left">params</td>
<td style="text-align:left">compilation 实例化需要的参数创建完毕之后</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compiler.js#L652">Compiler.js#L652</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">compile</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">params</td>
<td style="text-align:left">一次 compilation 编译创建之前</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compiler.js#L652">Compiler.js#L652</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">thisCompilation</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">compilation,params</td>
<td style="text-align:left">触发 compilation 事件之前执行</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compiler.js#L620">Compiler.js#L620</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">compilation</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">compilation,params</td>
<td style="text-align:left">compilation创建成功之后</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compiler.js#L620">Compiler.js#L620</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">make</td>
<td style="text-align:left">AsyncParallelHook</td>
<td style="text-align:left">compilation</td>
<td style="text-align:left">完成编译之前</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compiler.js#L659">Compiler.js#L659</a></td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/SingleEntryPlugin.js">SingleEntryPlugin</a></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">addEntry</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">entry,name</td>
<td style="text-align:left">增加入口</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/master/lib/Compilation.js#L1106">Compilation.js#L1106</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">buildModule</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">module</td>
<td style="text-align:left">在模块构建开始之前触发</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/master/lib/Compilation.js#L701">Compilation.js#L701</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">normalModuleLoader</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">loaderContext,module</td>
<td style="text-align:left">普通模块 loader，真正（一个接一个地）加载模块图（graph）中所有模块的函数</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/master/lib/NormalModule.js#L233">NormalModule.js#L233</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">succeedModule</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">module</td>
<td style="text-align:left">模块构建成功时执行</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#744">Compilation.js#744</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">succeedEntry</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">entry,name,module</td>
<td style="text-align:left"></td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1147">Compilation.js#L1147</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">finishModules</td>
<td style="text-align:left">AsyncSeriesHook</td>
<td style="text-align:left">modules</td>
<td style="text-align:left">所有模块都完成构建</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1216">Compilation.js#L1216</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">seal</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left"></td>
<td style="text-align:left">编译（compilation）停止接收新模块时触发</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1246">Compilation.js#L1246</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimizeDependenciesBasic</td>
<td style="text-align:left">SyncBailHook</td>
<td style="text-align:left">modules</td>
<td style="text-align:left">基础依赖优化开始时触发</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1249">Compilation.js#L1249</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimizeDependencies</td>
<td style="text-align:left">SyncBailHook</td>
<td style="text-align:left">modules</td>
<td style="text-align:left">依赖优化开始时触发</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1250">Compilation.js#L1250</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimizeDependenciesAdvanced</td>
<td style="text-align:left">SyncBailHook</td>
<td style="text-align:left">modules</td>
<td style="text-align:left">高级依赖优化开始时触发</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1251">Compilation.js#L1251</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">afterOptimizeDependencies</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">modules</td>
<td style="text-align:left">优化结束</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1255">Compilation.js#L1255</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">beforeChunks</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left"></td>
<td style="text-align:left">开始生成代码块</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1257">Compilation.js#L1257</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">dependencyReference</td>
<td style="text-align:left">SyncWaterfallHook</td>
<td style="text-align:left">dependencyReference,dependency,module</td>
<td style="text-align:left">依赖引用</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1565">Compilation.js#L1565</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">log</td>
<td style="text-align:left">SyncBailHook</td>
<td style="text-align:left">origin,logEntry</td>
<td style="text-align:left">打印日志</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L542">Compilation.js#L542</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">afterChunks</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">chunks</td>
<td style="text-align:left">代码块生成之后</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1282">Compilation.js#L1282</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimize</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left"></td>
<td style="text-align:left">优化阶段开始时触发</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1284">Compilation.js#L1284</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimizeModulesBasic</td>
<td style="text-align:left">SyncBailHook</td>
<td style="text-align:left">modules</td>
<td style="text-align:left">基础模块的优化</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1287">Compilation.js#L1284</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimizeModules</td>
<td style="text-align:left">SyncBailHook</td>
<td style="text-align:left">modules</td>
<td style="text-align:left">模块的优化</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1288">Compilation.js#L1284</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimizeModulesAdvanced</td>
<td style="text-align:left">SyncBailHook</td>
<td style="text-align:left">modules</td>
<td style="text-align:left">高级模块的优化</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1289">Compilation.js#L1284</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">afterOptimizeModules</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">modules</td>
<td style="text-align:left">模块优化结束时触发</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1293">Compilation.js#L1293</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimizeChunksBasic</td>
<td style="text-align:left">SyncBailHook</td>
<td style="text-align:left">chunks,chunkGroups</td>
<td style="text-align:left">基础chunk优化</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1287">Compilation.js#L1296</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimizeChunks</td>
<td style="text-align:left">SyncBailHook</td>
<td style="text-align:left">chunks,chunkGroups</td>
<td style="text-align:left">优化 chunks</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1297">Compilation.js#L1297</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimizeChunksAdvanced</td>
<td style="text-align:left">SyncBailHook</td>
<td style="text-align:left">chunks,chunkGroups</td>
<td style="text-align:left">高级chunk优化</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1298">Compilation.js#L1298</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">afterOptimizeChunks</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">chunks,chunkGroups</td>
<td style="text-align:left">chunk 优化完成之后触发</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1302">Compilation.js#L1302</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimizeTree</td>
<td style="text-align:left">AsyncSeriesHook</td>
<td style="text-align:left">chunks,modules</td>
<td style="text-align:left">异步优化依赖树</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1304">Compilation.js#L1304</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">afterOptimizeTree</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">chunks,modules</td>
<td style="text-align:left">异步优化依赖树完成时</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1309">Compilation.js#L1309</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimizeChunkModulesBasic</td>
<td style="text-align:left">SyncBailHook</td>
<td style="text-align:left">chunks,modules</td>
<td style="text-align:left">基础优化单个chunk中的 modules 开始</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1312">Compilation.js#L1312</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimizeChunkModules</td>
<td style="text-align:left">SyncBailHook</td>
<td style="text-align:left">chunks,modules</td>
<td style="text-align:left">优化单个chunk中的 modules 开始</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1313">Compilation.js#L1313</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimizeChunkModulesAdvanced</td>
<td style="text-align:left">SyncBailHook</td>
<td style="text-align:left">chunks,modules</td>
<td style="text-align:left">高级优化单个chunk中的 modules 开始</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1314">Compilation.js#L1314</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">afterOptimizeChunkModules</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">chunks,modules</td>
<td style="text-align:left">优化单个chunk中的 modules结束后</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1318">Compilation.js#L1318</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">shouldRecord</td>
<td style="text-align:left">SyncBailHook</td>
<td style="text-align:left"></td>
<td style="text-align:left">是否应该记录</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1320">Compilation.js#L1320</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">reviveModules</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">modules,records</td>
<td style="text-align:left">从 records 中恢复模块信息</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1322">Compilation.js#L1322</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimizeModuleOrder</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">modules</td>
<td style="text-align:left">将模块从最重要的到最不重要的进行排序</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1323">Compilation.js#L1323</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">advancedOptimizeModuleOrder</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">modules</td>
<td style="text-align:left">高级将模块从最重要的到最不重要的进行排序</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1324">Compilation.js#L1324</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">beforeModuleIds</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">modules</td>
<td style="text-align:left">处理 modulesId 之前</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1325">Compilation.js#L1325</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">moduleIds</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">modules</td>
<td style="text-align:left">处理 modulesId</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1326">Compilation.js#L1326</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimizeModuleIds</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">modules</td>
<td style="text-align:left">优化 modulesId</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1328">Compilation.js#L1328</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">afterOptimizeModuleIds</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">modules</td>
<td style="text-align:left">优化 modulesId之后</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1329">Compilation.js#L1329</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">reviveChunks</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">chunks,records</td>
<td style="text-align:left">从 records 中恢复 chunk 信息</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1333">Compilation.js#L1333</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimizeChunkOrder</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">chunks</td>
<td style="text-align:left">将 chunk 从最重要的到最不重要的进行排序</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1334">Compilation.js#L1334</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">beforeChunkIds</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">chunks</td>
<td style="text-align:left">chunk id 优化之前触发</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1335">Compilation.js#L1335</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimizeChunkIds</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">chunks</td>
<td style="text-align:left">chunk id 优化开始触发</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1337">Compilation.js#L1337</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">afterOptimizeChunkIds</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">chunks</td>
<td style="text-align:left">chunk id 优化结束触发</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1338">Compilation.js#L1338</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">recordModules</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">modules,records</td>
<td style="text-align:left">将模块信息存储到 records</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1343">Compilation.js#L1343</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">recordChunks</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">chunks,records</td>
<td style="text-align:left">将 chunk 信息存储到 records</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1344">Compilation.js#L1344</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">beforeHash</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left"></td>
<td style="text-align:left">在编译被哈希（hashed）之前</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1347">Compilation.js#L1347</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">chunkHash</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">chunk,chunkHash</td>
<td style="text-align:left">生成chunkHash</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1937">Compilation.js#L1937</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">contentHash</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">chunk</td>
<td style="text-align:left">生成contentHash</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1941">Compilation.js#L1941</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">afterHash</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left"></td>
<td style="text-align:left">在编译被哈希（hashed）之后</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1349">Compilation.js#L1349</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">recordHash</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">records</td>
<td style="text-align:left">记录hash</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1352">Compilation.js#L1352</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">beforeModuleAssets</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left"></td>
<td style="text-align:left">在创建模块的资源之前</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1355">Compilation.js#L1355</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">shouldGenerateChunkAssets</td>
<td style="text-align:left">SyncBailHook</td>
<td style="text-align:left"></td>
<td style="text-align:left">是否要生成chunk资源</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1357">Compilation.js#L1357</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">beforeChunkAssets</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left"></td>
<td style="text-align:left">在创建 chunk 资源（asset）之前</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1358">Compilation.js#L1358</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">chunkAsset</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">chunk,filename</td>
<td style="text-align:left">一个 chunk 中的一个资源被添加到编译中</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L2019">Compilation.js#L2019</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">additionalChunkAssets</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">chunks</td>
<td style="text-align:left">additionalChunkAssets</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1361">Compilation.js#L1361</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">record</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">compilation,records</td>
<td style="text-align:left">将 compilation 相关信息存储到 records 中</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1364">Compilation.js#L1364</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">additionalAssets</td>
<td style="text-align:left">AsyncSeriesHook</td>
<td style="text-align:left"></td>
<td style="text-align:left">为编译（compilation）创建附加资源（asset）</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1367">Compilation.js#L1367</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimizeChunkAssets</td>
<td style="text-align:left">AsyncSeriesHook</td>
<td style="text-align:left">compilation</td>
<td style="text-align:left">优化所有 chunk 资源（asset）</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1343">Compilation.js#L1343</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">afterOptimizeChunkAssets</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">chunks</td>
<td style="text-align:left">chunk 资源（asset）已经被优化</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1343">Compilation.js#L1371</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">optimizeAssets</td>
<td style="text-align:left">AsyncSeriesHook</td>
<td style="text-align:left">assets</td>
<td style="text-align:left">优化存储在 compilation.assets 中的所有资源（asset）</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1343">Compilation.js#L1371</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">afterOptimizeAssets</td>
<td style="text-align:left">SyncHook</td>
<td style="text-align:left">assets</td>
<td style="text-align:left">优化compilation.assets 中的所有资源（asset）之后</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1380">Compilation.js#L1380</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">needAdditionalSeal</td>
<td style="text-align:left">SyncBailHook</td>
<td style="text-align:left"></td>
<td style="text-align:left">是否需要额外的seal</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1381">Compilation.js#L1381</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">afterSeal</td>
<td style="text-align:left">AsyncSeriesHook</td>
<td style="text-align:left"></td>
<td style="text-align:left">seal之后</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compilation.js#L1383">Compilation.js#L1383</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">afterCompile</td>
<td style="text-align:left">AsyncSeriesHook</td>
<td style="text-align:left">compilation</td>
<td style="text-align:left">完成编译和封存（seal）编译产出之后</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compiler.js#L668">Compiler.js#L668</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">shouldEmit</td>
<td style="text-align:left">SyncBailHook</td>
<td style="text-align:left">compilation</td>
<td style="text-align:left">发布构建后资源之前触发，回调必须返回true/false，true则继续</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compiler.js#L267">Compiler.js#L267</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">emit</td>
<td style="text-align:left">AsyncSeriesHook</td>
<td style="text-align:left">compilation</td>
<td style="text-align:left">生成资源到 output 目录之前</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compiler.js#L481">Compiler.js#L481</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">assetEmitted</td>
<td style="text-align:left">AsyncSeriesHook</td>
<td style="text-align:left">file,content</td>
<td style="text-align:left">assetEmitted</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compiler.js#L437">Compiler.js#L437</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">afterEmit</td>
<td style="text-align:left">AsyncSeriesHook</td>
<td style="text-align:left">compilation</td>
<td style="text-align:left">生成资源到 output 目录之后</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compiler.js#L472">Compiler.js#L472</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">needAdditionalPass</td>
<td style="text-align:left">SyncBailHook</td>
<td style="text-align:left"></td>
<td style="text-align:left">是否需要额外的</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compiler.js#L281">Compiler.js#L281</a></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">compiler</td>
<td style="text-align:left">done</td>
<td style="text-align:left">AsyncSeriesHook</td>
<td style="text-align:left">stats</td>
<td style="text-align:left">compilation完成之后</td>
<td style="text-align:left"><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Compiler.js#L304">Compiler.js#L304</a></td>
</tr>
</tbody>
</table>
<h2 id="t155.Stats 对象">5.Stats 对象 <a href="#t155.Stats 对象"> # </a></h2>
<ul>
<li>在 Webpack 的回调函数中会得到stats对象</li>
<li>这个对象实际来自于<code>Compilation.getStats()</code>，返回的是主要含有<code>modules</code>、<code>chunks</code>和<code>assets</code>三个属性值的对象。</li>
<li>Stats对象本质上来自于<a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/Stats.js">lib/Stats.js</a>的类实例</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">字段</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">modules</td>
<td style="text-align:left">记录了所有解析后的模块</td>
</tr>
<tr>
<td style="text-align:left">chunks</td>
<td style="text-align:left">记录了所有chunk</td>
</tr>
<tr>
<td style="text-align:left">assets</td>
<td style="text-align:left">记录了所有要生成的文件</td>
</tr>
</tbody>
</table>
<pre><code class="lang-js">npx webpack --profile --json &gt; stats.json
</code></pre>
<pre><code class="lang-json">{
  <span class="hljs-attr">"errors"</span>: [],<span class="hljs-comment">// 错误字符串 (error string) 的数组</span>
  <span class="hljs-attr">"warnings"</span>: [],<span class="hljs-comment">//警告字符串 (warning string) 的数组</span>
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"4.39.3"</span>,<span class="hljs-comment">// 用来编译的 webpack 的版本</span>
  <span class="hljs-attr">"hash"</span>: <span class="hljs-string">"3e945ec6b2c56d0b010e"</span>,<span class="hljs-comment">//编译使用的 hash</span>
  <span class="hljs-attr">"time"</span>: <span class="hljs-number">66</span>, <span class="hljs-comment">// 编译耗时 (ms)</span>
  <span class="hljs-attr">"builtAt"</span>: <span class="hljs-number">1567225465347</span>,<span class="hljs-comment">//编译的时间</span>
  <span class="hljs-attr">"publicPath"</span>: <span class="hljs-string">""</span>,<span class="hljs-comment">//资源访问路径</span>
  <span class="hljs-attr">"outputPath"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\dist"</span>,<span class="hljs-comment">//webpack输出目录</span>
  <span class="hljs-attr">"assetsByChunkName"</span>: {<span class="hljs-comment">//用作映射的 chunk 的名称</span>
    <span class="hljs-attr">"lazy"</span>: <span class="hljs-string">"lazy.bundle.js"</span>,<span class="hljs-comment">//chunk的名字叫lazy,lazy.bundle.js</span>
    <span class="hljs-attr">"main"</span>: <span class="hljs-string">"bundle.js"</span><span class="hljs-comment">//chunk的名字叫main,打包出来了bundle.js</span>
  },
  <span class="hljs-attr">"assets"</span>: [<span class="hljs-comment">//asset 对象 (asset objects) 的数组</span>
    {
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"bundle.js"</span>,<span class="hljs-comment">//文件名</span>
      <span class="hljs-attr">"size"</span>: <span class="hljs-number">9043</span>,<span class="hljs-comment">//大小</span>
      <span class="hljs-attr">"chunks"</span>: [<span class="hljs-comment">//包含的代码块</span>
        <span class="hljs-string">"main"</span>
      ],
      <span class="hljs-attr">"chunkNames"</span>: [<span class="hljs-comment">//包含的代码块名称</span>
        <span class="hljs-string">"main"</span>
      ],
      <span class="hljs-attr">"emitted"</span>: <span class="hljs-literal">true</span><span class="hljs-comment">//是否要生成</span>
    },
    {
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"lazy.bundle.js"</span>, <span class="hljs-comment">// 输出的文件名</span>
      <span class="hljs-attr">"size"</span>: <span class="hljs-number">336</span>,<span class="hljs-comment">// 文件的大小</span>
      <span class="hljs-attr">"chunks"</span>: [ <span class="hljs-comment">// 这个 asset 包含的 chunk 的 id</span>
        <span class="hljs-string">"lazy"</span>
      ],
      <span class="hljs-attr">"chunkNames"</span>: [<span class="hljs-comment">// 这个 asset 包含的 chunk</span>
        <span class="hljs-string">"lazy"</span>
      ],
      <span class="hljs-attr">"emitted"</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// 表示这个 asset 是否会让它输出到 output 目录</span>
    }
  ],
  <span class="hljs-attr">"filteredAssets"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">"entrypoints"</span>: {
    <span class="hljs-attr">"main"</span>: {
      <span class="hljs-attr">"chunks"</span>: [
        <span class="hljs-string">"main"</span>
      ],
      <span class="hljs-attr">"assets"</span>: [
        <span class="hljs-string">"bundle.js"</span>
      ],
      <span class="hljs-attr">"children"</span>: {},
      <span class="hljs-attr">"childAssets"</span>: {}
    }
  },
  <span class="hljs-attr">"namedChunkGroups"</span>: {
    <span class="hljs-attr">"main"</span>: {
      <span class="hljs-attr">"chunks"</span>: [
        <span class="hljs-string">"main"</span>
      ],
      <span class="hljs-attr">"assets"</span>: [
        <span class="hljs-string">"bundle.js"</span>
      ],
      <span class="hljs-attr">"children"</span>: {},
      <span class="hljs-attr">"childAssets"</span>: {}
    },
    <span class="hljs-attr">"lazy"</span>: {
      <span class="hljs-attr">"chunks"</span>: [
        <span class="hljs-string">"lazy"</span>
      ],
      <span class="hljs-attr">"assets"</span>: [
        <span class="hljs-string">"lazy.bundle.js"</span>
      ],
      <span class="hljs-attr">"children"</span>: {},
      <span class="hljs-attr">"childAssets"</span>: {}
    }
  },
  <span class="hljs-attr">"chunks"</span>: [ <span class="hljs-comment">//chunk 对象 (chunk objects) 的数组</span>
    {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"lazy"</span>, <span class="hljs-comment">// 这个 chunk 的id</span>
      <span class="hljs-attr">"rendered"</span>: <span class="hljs-literal">true</span>,<span class="hljs-comment">// 表示这个 chunk 是否会参与进编译</span>
      <span class="hljs-attr">"initial"</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">"entry"</span>: <span class="hljs-literal">false</span>,<span class="hljs-comment">// 表示这个 chunk 是否包含 webpack 的运行时</span>
      <span class="hljs-attr">"size"</span>: <span class="hljs-number">24</span>,<span class="hljs-comment">//预估的模块大小</span>
      <span class="hljs-attr">"names"</span>: [<span class="hljs-comment">// 包含在这个 chunk 内的 chunk 的名字的数组</span>
        <span class="hljs-string">"lazy"</span>
      ],
      <span class="hljs-attr">"files"</span>: [
        <span class="hljs-string">"lazy.bundle.js"</span>
      ],
      <span class="hljs-attr">"hash"</span>: <span class="hljs-string">"d08a8b502d30324f81e1"</span>,
      <span class="hljs-attr">"siblings"</span>: [],
      <span class="hljs-attr">"parents"</span>: [<span class="hljs-comment">// 父 chunk 的 ids</span>
        <span class="hljs-string">"main"</span>
      ],
      <span class="hljs-attr">"children"</span>: [],
      <span class="hljs-attr">"childrenByOrder"</span>: {},
      <span class="hljs-attr">"modules"</span>: [
        {
          <span class="hljs-attr">"id"</span>: <span class="hljs-string">"./src/lazy.js"</span>,
          <span class="hljs-attr">"identifier"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\lazy.js"</span>,
          <span class="hljs-attr">"name"</span>: <span class="hljs-string">"./src/lazy.js"</span>,
          <span class="hljs-attr">"index"</span>: <span class="hljs-number">2</span>,
          <span class="hljs-attr">"index2"</span>: <span class="hljs-number">2</span>,
          <span class="hljs-attr">"size"</span>: <span class="hljs-number">24</span>,
          <span class="hljs-attr">"cacheable"</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">"built"</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">"optional"</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">"prefetched"</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">"chunks"</span>: [
            <span class="hljs-string">"lazy"</span>
          ],
          <span class="hljs-attr">"issuer"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\index.js"</span>,
          <span class="hljs-attr">"issuerId"</span>: <span class="hljs-string">"./src/index.js"</span>,
          <span class="hljs-attr">"issuerName"</span>: <span class="hljs-string">"./src/index.js"</span>,
          <span class="hljs-attr">"issuerPath"</span>: [
            {
              <span class="hljs-attr">"id"</span>: <span class="hljs-string">"./src/index.js"</span>,
              <span class="hljs-attr">"identifier"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\index.js"</span>,
              <span class="hljs-attr">"name"</span>: <span class="hljs-string">"./src/index.js"</span>,
              <span class="hljs-attr">"profile"</span>: {
                <span class="hljs-attr">"factory"</span>: <span class="hljs-number">18</span>,
                <span class="hljs-attr">"building"</span>: <span class="hljs-number">14</span>
              }
            }
          ],
          <span class="hljs-attr">"profile"</span>: {
            <span class="hljs-attr">"factory"</span>: <span class="hljs-number">4</span>,
            <span class="hljs-attr">"building"</span>: <span class="hljs-number">2</span>
          },
          <span class="hljs-attr">"failed"</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">"errors"</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">"warnings"</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">"assets"</span>: [],
          <span class="hljs-attr">"reasons"</span>: [<span class="hljs-comment">// 生成 assets 的原因</span>
            {
              <span class="hljs-attr">"moduleId"</span>: <span class="hljs-string">"./src/index.js"</span>,<span class="hljs-comment">//模块的ID</span>
              <span class="hljs-attr">"moduleIdentifier"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\index.js"</span>,<span class="hljs-comment">//唯一标识</span>
              <span class="hljs-attr">"module"</span>: <span class="hljs-string">"./src/index.js"</span>,<span class="hljs-comment">//模块</span>
              <span class="hljs-attr">"moduleName"</span>: <span class="hljs-string">"./src/index.js"</span>,<span class="hljs-comment">//模块名称</span>
              <span class="hljs-attr">"type"</span>: <span class="hljs-string">"import()"</span>,<span class="hljs-comment">//类型</span>
              <span class="hljs-attr">"userRequest"</span>: <span class="hljs-string">"./lazy"</span>,<span class="hljs-comment">//用户请求方式</span>
              <span class="hljs-attr">"loc"</span>: <span class="hljs-string">"2:0-46"</span><span class="hljs-comment">//在父模块中的位置</span>
            }
          ],
          <span class="hljs-attr">"providedExports"</span>: <span class="hljs-literal">null</span>,
          <span class="hljs-attr">"optimizationBailout"</span>: [],
          <span class="hljs-attr">"depth"</span>: <span class="hljs-number">1</span>,
          <span class="hljs-attr">"source"</span>: <span class="hljs-string">"module.exports = 'lazy';"</span>
        }
      ],
      <span class="hljs-attr">"filteredModules"</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">"origins"</span>: [
        {
          <span class="hljs-attr">"moduleId"</span>: <span class="hljs-string">"./src/index.js"</span>,<span class="hljs-comment">// 模块的ID</span>
          <span class="hljs-attr">"module"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\index.js"</span>,<span class="hljs-comment">// 模块的位置</span>
          <span class="hljs-attr">"moduleIdentifier"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\index.js"</span>,<span class="hljs-comment">// 模块的地址</span>
          <span class="hljs-attr">"moduleName"</span>: <span class="hljs-string">"./src/index.js"</span>,<span class="hljs-comment">//模块的相对地址</span>
          <span class="hljs-attr">"loc"</span>: <span class="hljs-string">"2:0-46"</span>,
          <span class="hljs-attr">"request"</span>: <span class="hljs-string">"./lazy"</span>,
          <span class="hljs-attr">"reasons"</span>: [] <span class="hljs-comment">// 具体是哪行生成了这个chunk</span>
        }
      ]
    },
    {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"main"</span>,
      <span class="hljs-attr">"rendered"</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">"initial"</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">"entry"</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">"size"</span>: <span class="hljs-number">162</span>,
      <span class="hljs-attr">"names"</span>: [
        <span class="hljs-string">"main"</span>
      ],
      <span class="hljs-attr">"files"</span>: [
        <span class="hljs-string">"bundle.js"</span>
      ],
      <span class="hljs-attr">"hash"</span>: <span class="hljs-string">"263cadc0459e8470151b"</span>,
      <span class="hljs-attr">"siblings"</span>: [],
      <span class="hljs-attr">"parents"</span>: [],
      <span class="hljs-attr">"children"</span>: [<span class="hljs-comment">// 自己引用哪些chunk</span>
        <span class="hljs-string">"lazy"</span>
      ],
      <span class="hljs-attr">"childrenByOrder"</span>: {}, <span class="hljs-comment">// 引用的顺序</span>
      <span class="hljs-attr">"modules"</span>: [
        {
          <span class="hljs-attr">"id"</span>: <span class="hljs-string">"./src/hello.js"</span>,
          <span class="hljs-attr">"identifier"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\hello.js"</span>,
          <span class="hljs-attr">"name"</span>: <span class="hljs-string">"./src/hello.js"</span>,
          <span class="hljs-attr">"index"</span>: <span class="hljs-number">1</span>,
          <span class="hljs-attr">"index2"</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">"size"</span>: <span class="hljs-number">25</span>,
          <span class="hljs-attr">"cacheable"</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">"built"</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">"optional"</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">"prefetched"</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">"chunks"</span>: [
            <span class="hljs-string">"main"</span>
          ],
          <span class="hljs-attr">"issuer"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\index.js"</span>,
          <span class="hljs-attr">"issuerId"</span>: <span class="hljs-string">"./src/index.js"</span>,
          <span class="hljs-attr">"issuerName"</span>: <span class="hljs-string">"./src/index.js"</span>,
          <span class="hljs-attr">"issuerPath"</span>: [
            {
              <span class="hljs-attr">"id"</span>: <span class="hljs-string">"./src/index.js"</span>,
              <span class="hljs-attr">"identifier"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\index.js"</span>,
              <span class="hljs-attr">"name"</span>: <span class="hljs-string">"./src/index.js"</span>,
              <span class="hljs-attr">"profile"</span>: {
                <span class="hljs-attr">"factory"</span>: <span class="hljs-number">18</span>,
                <span class="hljs-attr">"building"</span>: <span class="hljs-number">14</span>
              }
            }
          ],
          <span class="hljs-attr">"profile"</span>: {
            <span class="hljs-attr">"factory"</span>: <span class="hljs-number">4</span>,
            <span class="hljs-attr">"building"</span>: <span class="hljs-number">2</span>
          },
          <span class="hljs-attr">"failed"</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">"errors"</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">"warnings"</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">"assets"</span>: [],
          <span class="hljs-attr">"reasons"</span>: [
            {
              <span class="hljs-attr">"moduleId"</span>: <span class="hljs-string">"./src/index.js"</span>,
              <span class="hljs-attr">"moduleIdentifier"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\index.js"</span>,
              <span class="hljs-attr">"module"</span>: <span class="hljs-string">"./src/index.js"</span>,
              <span class="hljs-attr">"moduleName"</span>: <span class="hljs-string">"./src/index.js"</span>,
              <span class="hljs-attr">"type"</span>: <span class="hljs-string">"cjs require"</span>,
              <span class="hljs-attr">"userRequest"</span>: <span class="hljs-string">"./hello"</span>,
              <span class="hljs-attr">"loc"</span>: <span class="hljs-string">"1:12-30"</span>
            }
          ],
          <span class="hljs-attr">"providedExports"</span>: <span class="hljs-literal">null</span>,
          <span class="hljs-attr">"optimizationBailout"</span>: [],
          <span class="hljs-attr">"depth"</span>: <span class="hljs-number">1</span>,
          <span class="hljs-attr">"source"</span>: <span class="hljs-string">"module.exports = 'hello';"</span>
        },
        {
          <span class="hljs-attr">"id"</span>: <span class="hljs-string">"./src/index.js"</span>,
          <span class="hljs-attr">"identifier"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\index.js"</span>,
          <span class="hljs-attr">"name"</span>: <span class="hljs-string">"./src/index.js"</span>,
          <span class="hljs-attr">"index"</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">"index2"</span>: <span class="hljs-number">1</span>,
          <span class="hljs-attr">"size"</span>: <span class="hljs-number">137</span>,
          <span class="hljs-attr">"cacheable"</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">"built"</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">"optional"</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">"prefetched"</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">"chunks"</span>: [
            <span class="hljs-string">"main"</span>
          ],
          <span class="hljs-attr">"issuer"</span>: <span class="hljs-literal">null</span>,
          <span class="hljs-attr">"issuerId"</span>: <span class="hljs-literal">null</span>,
          <span class="hljs-attr">"issuerName"</span>: <span class="hljs-literal">null</span>,
          <span class="hljs-attr">"issuerPath"</span>: <span class="hljs-literal">null</span>,
          <span class="hljs-attr">"profile"</span>: {
            <span class="hljs-attr">"factory"</span>: <span class="hljs-number">18</span>,
            <span class="hljs-attr">"building"</span>: <span class="hljs-number">14</span>
          },
          <span class="hljs-attr">"failed"</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">"errors"</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">"warnings"</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">"assets"</span>: [],
          <span class="hljs-attr">"reasons"</span>: [
            {
              <span class="hljs-attr">"moduleId"</span>: <span class="hljs-literal">null</span>,
              <span class="hljs-attr">"moduleIdentifier"</span>: <span class="hljs-literal">null</span>,
              <span class="hljs-attr">"module"</span>: <span class="hljs-literal">null</span>,
              <span class="hljs-attr">"moduleName"</span>: <span class="hljs-literal">null</span>,
              <span class="hljs-attr">"type"</span>: <span class="hljs-string">"single entry"</span>,
              <span class="hljs-attr">"userRequest"</span>: <span class="hljs-string">"./src/index.js"</span>,
              <span class="hljs-attr">"loc"</span>: <span class="hljs-string">"main"</span>
            }
          ],
          <span class="hljs-attr">"providedExports"</span>: <span class="hljs-literal">null</span>,
          <span class="hljs-attr">"optimizationBailout"</span>: [],
          <span class="hljs-attr">"depth"</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">"source"</span>: <span class="hljs-string">"let hello = require('./hello');\r\nimport(/* webpackChunkName: \"lazy\" */'./lazy').then(result=&gt;{\r\n    console.log(hello,resut.default)\r\n});"</span>
        }
      ],
      <span class="hljs-attr">"filteredModules"</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">"origins"</span>: [
        {
          <span class="hljs-attr">"module"</span>: <span class="hljs-string">""</span>,
          <span class="hljs-attr">"moduleIdentifier"</span>: <span class="hljs-string">""</span>,
          <span class="hljs-attr">"moduleName"</span>: <span class="hljs-string">""</span>,
          <span class="hljs-attr">"loc"</span>: <span class="hljs-string">"main"</span>,
          <span class="hljs-attr">"request"</span>: <span class="hljs-string">"./src/index.js"</span>,
          <span class="hljs-attr">"reasons"</span>: []
        }
      ]
    }
  ],
  <span class="hljs-attr">"modules"</span>: [<span class="hljs-comment">// 模块对象 (module objects) 的数组</span>
    {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"./src/hello.js"</span>,<span class="hljs-comment">//模块ID</span>
      <span class="hljs-attr">"identifier"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\hello.js"</span>,<span class="hljs-comment">//webpack内部使用的唯一的标识</span>
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"./src/hello.js"</span>,<span class="hljs-comment">// 实际文件的地址</span>
      <span class="hljs-attr">"index"</span>: <span class="hljs-number">1</span>,<span class="hljs-comment">//索引</span>
      <span class="hljs-attr">"index2"</span>: <span class="hljs-number">0</span>,<span class="hljs-comment">//索引</span>
      <span class="hljs-attr">"size"</span>: <span class="hljs-number">25</span>,<span class="hljs-comment">// 预估模块的大小 (byte)</span>
      <span class="hljs-attr">"cacheable"</span>: <span class="hljs-literal">true</span>,<span class="hljs-comment">// 表示这个模块是否会被缓存</span>
      <span class="hljs-attr">"built"</span>: <span class="hljs-literal">true</span>,<span class="hljs-comment">// 表示这个模块会参与 Loaders , 解析, 并被编译</span>
      <span class="hljs-attr">"optional"</span>: <span class="hljs-literal">false</span>,<span class="hljs-comment">// 每一个对这个模块的请求都会包裹在 `try... catch` 内</span>
      <span class="hljs-attr">"prefetched"</span>: <span class="hljs-literal">false</span>,<span class="hljs-comment">// 表示这个模块是否会被 prefetched</span>
      <span class="hljs-attr">"chunks"</span>: [<span class="hljs-comment">//此模块在哪个代码块内</span>
        <span class="hljs-string">"main"</span>
      ],
      <span class="hljs-attr">"issuer"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\index.js"</span>,<span class="hljs-comment">//使用者唯一标识</span>
      <span class="hljs-attr">"issuerId"</span>: <span class="hljs-string">"./src/index.js"</span>,<span class="hljs-comment">//使用者ID</span>
      <span class="hljs-attr">"issuerName"</span>: <span class="hljs-string">"./src/index.js"</span>,<span class="hljs-comment">//使用者名称</span>
      <span class="hljs-attr">"issuerPath"</span>: [<span class="hljs-comment">//使用者路径</span>
        {
          <span class="hljs-attr">"id"</span>: <span class="hljs-string">"./src/index.js"</span>,
          <span class="hljs-attr">"identifier"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\index.js"</span>,
          <span class="hljs-attr">"name"</span>: <span class="hljs-string">"./src/index.js"</span>,
          <span class="hljs-attr">"profile"</span>: { <span class="hljs-comment">//这个模块特有的编译时间数据(ms)</span>
            <span class="hljs-attr">"factory"</span>: <span class="hljs-number">18</span>,<span class="hljs-comment">// 解决依赖的时间</span>
            <span class="hljs-attr">"building"</span>: <span class="hljs-number">14</span> <span class="hljs-comment">// 载入和解析的时间</span>
          }
        }
      ],
      <span class="hljs-attr">"profile"</span>: {
        <span class="hljs-attr">"factory"</span>: <span class="hljs-number">4</span>,<span class="hljs-comment">// 解决依赖的时间</span>
        <span class="hljs-attr">"building"</span>: <span class="hljs-number">2</span><span class="hljs-comment">// 载入和解析的时间</span>
      },
      <span class="hljs-attr">"failed"</span>: <span class="hljs-literal">false</span>,<span class="hljs-comment">//是否失败</span>
      <span class="hljs-attr">"errors"</span>: <span class="hljs-number">0</span>,<span class="hljs-comment">// 处理模块时错误的数量</span>
      <span class="hljs-attr">"warnings"</span>: <span class="hljs-number">0</span>,<span class="hljs-comment">// 处理模块时警告的数量</span>
      <span class="hljs-attr">"assets"</span>: [],<span class="hljs-comment">//在哪个资源内</span>
      <span class="hljs-attr">"reasons"</span>: [
        {
          <span class="hljs-attr">"moduleId"</span>: <span class="hljs-string">"./src/index.js"</span>,<span class="hljs-comment">// 模块的 ID</span>
          <span class="hljs-attr">"moduleIdentifier"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\index.js"</span>,<span class="hljs-comment">// 模块的地址</span>
          <span class="hljs-attr">"module"</span>: <span class="hljs-string">"./src/index.js"</span>,<span class="hljs-comment">// 所基于模块的相对地址 context</span>
          <span class="hljs-attr">"moduleName"</span>: <span class="hljs-string">"./src/index.js"</span>,
          <span class="hljs-attr">"type"</span>: <span class="hljs-string">"cjs require"</span>,<span class="hljs-comment">// 使用的请求的种类 (require或import)</span>
          <span class="hljs-attr">"userRequest"</span>: <span class="hljs-string">"./hello"</span>,<span class="hljs-comment">// 用来 `import` 或者 `require` 的源字符串</span>
          <span class="hljs-attr">"loc"</span>: <span class="hljs-string">"1:12-30"</span> <span class="hljs-comment">// 导致这个被加入依赖图标的代码行数</span>
        }
      ],
      <span class="hljs-attr">"providedExports"</span>: <span class="hljs-literal">null</span>,<span class="hljs-comment">//提供的导出对象</span>
      <span class="hljs-attr">"optimizationBailout"</span>: [],<span class="hljs-comment">//失败时的优化</span>
      <span class="hljs-attr">"depth"</span>: <span class="hljs-number">1</span>,<span class="hljs-comment">//模块深度</span>
      <span class="hljs-attr">"source"</span>: <span class="hljs-string">"module.exports = 'hello';"</span><span class="hljs-comment">// 字符串化的输入</span>
    },
    {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"./src/index.js"</span>,
      <span class="hljs-attr">"identifier"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\index.js"</span>,
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"./src/index.js"</span>,
      <span class="hljs-attr">"index"</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">"index2"</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">"size"</span>: <span class="hljs-number">137</span>,
      <span class="hljs-attr">"cacheable"</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">"built"</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">"optional"</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">"prefetched"</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">"chunks"</span>: [
        <span class="hljs-string">"main"</span>
      ],
      <span class="hljs-attr">"issuer"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"issuerId"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"issuerName"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"issuerPath"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"profile"</span>: {
        <span class="hljs-attr">"factory"</span>: <span class="hljs-number">18</span>,
        <span class="hljs-attr">"building"</span>: <span class="hljs-number">14</span>
      },
      <span class="hljs-attr">"failed"</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">"errors"</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">"warnings"</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">"assets"</span>: [],
      <span class="hljs-attr">"reasons"</span>: [
        {
          <span class="hljs-attr">"moduleId"</span>: <span class="hljs-literal">null</span>,
          <span class="hljs-attr">"moduleIdentifier"</span>: <span class="hljs-literal">null</span>,
          <span class="hljs-attr">"module"</span>: <span class="hljs-literal">null</span>,
          <span class="hljs-attr">"moduleName"</span>: <span class="hljs-literal">null</span>,
          <span class="hljs-attr">"type"</span>: <span class="hljs-string">"single entry"</span>,
          <span class="hljs-attr">"userRequest"</span>: <span class="hljs-string">"./src/index.js"</span>,
          <span class="hljs-attr">"loc"</span>: <span class="hljs-string">"main"</span>
        }
      ],
      <span class="hljs-attr">"providedExports"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"optimizationBailout"</span>: [],
      <span class="hljs-attr">"depth"</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">"source"</span>: <span class="hljs-string">"let hello = require('./hello');\r\nimport(/* webpackChunkName: \"lazy\" */'./lazy').then(result=&gt;{\r\n    console.log(hello,resut.default)\r\n});"</span>
    },
    {
      <span class="hljs-attr">"id"</span>: <span class="hljs-string">"./src/lazy.js"</span>,
      <span class="hljs-attr">"identifier"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\lazy.js"</span>,
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"./src/lazy.js"</span>,
      <span class="hljs-attr">"index"</span>: <span class="hljs-number">2</span>,
      <span class="hljs-attr">"index2"</span>: <span class="hljs-number">2</span>,
      <span class="hljs-attr">"size"</span>: <span class="hljs-number">24</span>,
      <span class="hljs-attr">"cacheable"</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">"built"</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">"optional"</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">"prefetched"</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">"chunks"</span>: [
        <span class="hljs-string">"lazy"</span>
      ],
      <span class="hljs-attr">"issuer"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\index.js"</span>,
      <span class="hljs-attr">"issuerId"</span>: <span class="hljs-string">"./src/index.js"</span>,
      <span class="hljs-attr">"issuerName"</span>: <span class="hljs-string">"./src/index.js"</span>,
      <span class="hljs-attr">"issuerPath"</span>: [
        {
          <span class="hljs-attr">"id"</span>: <span class="hljs-string">"./src/index.js"</span>,
          <span class="hljs-attr">"identifier"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\index.js"</span>,
          <span class="hljs-attr">"name"</span>: <span class="hljs-string">"./src/index.js"</span>,
          <span class="hljs-attr">"profile"</span>: {
            <span class="hljs-attr">"factory"</span>: <span class="hljs-number">18</span>,
            <span class="hljs-attr">"building"</span>: <span class="hljs-number">14</span>
          }
        }
      ],
      <span class="hljs-attr">"profile"</span>: {
        <span class="hljs-attr">"factory"</span>: <span class="hljs-number">4</span>,
        <span class="hljs-attr">"building"</span>: <span class="hljs-number">2</span>
      },
      <span class="hljs-attr">"failed"</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">"errors"</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">"warnings"</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">"assets"</span>: [],
      <span class="hljs-attr">"reasons"</span>: [
        {
          <span class="hljs-attr">"moduleId"</span>: <span class="hljs-string">"./src/index.js"</span>,
          <span class="hljs-attr">"moduleIdentifier"</span>: <span class="hljs-string">"C:\\vipdata\\vipproject\\webpack-source\\src\\index.js"</span>,
          <span class="hljs-attr">"module"</span>: <span class="hljs-string">"./src/index.js"</span>,
          <span class="hljs-attr">"moduleName"</span>: <span class="hljs-string">"./src/index.js"</span>,
          <span class="hljs-attr">"type"</span>: <span class="hljs-string">"import()"</span>,
          <span class="hljs-attr">"userRequest"</span>: <span class="hljs-string">"./lazy"</span>,
          <span class="hljs-attr">"loc"</span>: <span class="hljs-string">"2:0-46"</span>
        }
      ],
      <span class="hljs-attr">"providedExports"</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">"optimizationBailout"</span>: [],
      <span class="hljs-attr">"depth"</span>: <span class="hljs-number">1</span>,
      <span class="hljs-attr">"source"</span>: <span class="hljs-string">"module.exports = 'lazy';"</span>
    }
  ],
  <span class="hljs-attr">"filteredModules"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">"logging"</span>: {
    <span class="hljs-attr">"webpack.buildChunkGraph.visitModules"</span>: {
      <span class="hljs-attr">"entries"</span>: [],
      <span class="hljs-attr">"filteredEntries"</span>: <span class="hljs-number">5</span>,
      <span class="hljs-attr">"debug"</span>: <span class="hljs-literal">false</span>
    }
  },
  <span class="hljs-attr">"children"</span>: []
}

</code></pre>
<h2 id="t166. 主要工作流程">6. 主要工作流程 <a href="#t166. 主要工作流程"> # </a></h2>
<ul>
<li>Webpack 的运行流程是一个串行的过程，从启动到结束会依次执行以下流程：</li>
<li><code>初始化参数</code>：从配置文件和 Shell 语句中读取与合并参数，得出最终的参数；</li>
<li>开始编译：用上一步得到的参数初始化 Compiler 对象，加载所有配置的插件，执行对象的run方法开始执行编译；
确定入口：根据配置中的 entry 找出所有的入口文件</li>
<li>编译模块：从入口文件出发，调用所有配置的 Loader 对模块进行编译，再找出该模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理；</li>
<li>完成模块编译：在经过第4步使用 Loader 翻译完所有模块后，得到了每个模块被翻译后的最终内容以及它们之间的依赖关系；</li>
<li>输出资源：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 Chunk，再把每个 Chunk 转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会；</li>
<li>输出完成：在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统。</li>
<li>在以上过程中，Webpack 会在特定的时间点广播出特定的事件，插件在监听到感兴趣的事件后会执行特定的逻辑，并且插件可以调用 Webpack 提供的 API 改变 Webpack 的运行结果。</li>
</ul>
<p><img src="http://img.zhufengpeixun.cn/webpackcode.jpg" alt="webpackcode"></p>
<h3 id="t176.1 初始化阶段">6.1 初始化阶段 <a href="#t176.1 初始化阶段"> # </a></h3>
<table>
<thead>
<tr>
<th style="text-align:left">事件名</th>
<th style="text-align:left">解释</th>
<th style="text-align:left">代码位置</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">读取命令行参数</td>
<td style="text-align:left">从命令行中读取用户输入的参数</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/webpack-cli/bin/cli.js#L241"> require("./convert-argv")(argv)</a></td>
</tr>
<tr>
<td style="text-align:left">实例化 Compiler</td>
<td style="text-align:left">1.用上一步得到的参数初始化 Compiler 实例<br>2.Compiler 负责文件监听和启动编译<br>3.Compiler 实例中包含了完整的 Webpack 配置，全局只有一个 Compiler 实例。<br></td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/webpack-cli/bin/cli.js#L443">compiler = webpack(options);</a></td>
</tr>
<tr>
<td style="text-align:left">加载插件</td>
<td style="text-align:left">1.依次调用插件的 apply 方法，让插件可以监听后续的所有事件节点。<br>同时给插件传入 compiler 实例的引用，以方便插件通过 compiler 调用 Webpack 提供的 API。</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/webpack.js#L42-L50">plugin.apply(compiler)</a></td>
</tr>
<tr>
<td style="text-align:left">处理入口</td>
<td style="text-align:left">读取配置的 Entrys，为每个 Entry 实例化一个对应的 EntryPlugin，为后面该 Entry 的递归解析工作做准备</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/WebpackOptionsApply.js#L306">new EntryOptionPlugin().apply(compiler)</a><br><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/EntryOptionPlugin.js#L24">new SingleEntryPlugin(context, item, name)</a><br><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/SingleEntryPlugin.js#L40-L48">compiler.hooks.make.tapAsync</a></td>
</tr>
</tbody>
</table>
<h3 id="t186.2 编译阶段">6.2 编译阶段 <a href="#t186.2 编译阶段"> # </a></h3>
<table>
<thead>
<tr>
<th style="text-align:left">事件名</th>
<th style="text-align:left">解释</th>
<th style="text-align:left">代码位置</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">run</td>
<td style="text-align:left">启动一次新的编译</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compiler.js#L263-L271">this.hooks.run.callAsync</a></td>
</tr>
<tr>
<td style="text-align:left">compile</td>
<td style="text-align:left">该事件是为了告诉插件一次新的编译将要启动，同时会给插件传入compiler 对象。</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compiler.js#L529-L555">compile(callback)</a></td>
</tr>
<tr>
<td style="text-align:left">compilation</td>
<td style="text-align:left">当 Webpack 以开发模式运行时，每当检测到文件变化，一次新的 Compilation 将被创建。<br>一个 Compilation 对象包含了当前的模块资源、编译生成资源、变化的文件等。<br>Compilation 对象也提供了很多事件回调供插件做扩展。</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compiler.js#L491-L501">newCompilation(params)</a></td>
</tr>
<tr>
<td style="text-align:left">make</td>
<td style="text-align:left">一个新的 Compilation 创建完毕主开始编译</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compiler.js#L544">this.hooks.make.callAsync</a></td>
</tr>
<tr>
<td style="text-align:left">addEntry</td>
<td style="text-align:left">即将从 Entry 开始读取文件</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compilation.js#L1027">compilation.addEntry</a><br><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compilation.js#L1047">this._addModuleChain</a></td>
</tr>
<tr>
<td style="text-align:left">moduleFactory</td>
<td style="text-align:left">创建模块工厂</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compilation.js#L933">const moduleFactory = this.dependencyFactories.get(Dep)</a></td>
</tr>
<tr>
<td style="text-align:left">create</td>
<td style="text-align:left">创建模块</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/NormalModuleFactory.js#L369-L409">moduleFactory.create</a></td>
</tr>
<tr>
<td style="text-align:left">factory</td>
<td style="text-align:left">开始创建模块</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/NormalModuleFactory.js#L396-L406">factory(result, (err, module)</a><br><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/NormalModuleFactory.js#L129">resolver(result</a><br><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/NormalModuleFactory.js#L159">this.hooks.resolver.tap("NormalModuleFactory"</a></td>
</tr>
<tr>
<td style="text-align:left">resolveRequestArray</td>
<td style="text-align:left">解析loader路径</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/NormalModuleFactory.js#L411">resolveRequestArray</a></td>
</tr>
<tr>
<td style="text-align:left">resolve</td>
<td style="text-align:left">解析资源文件路径</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_enhanced-resolve%404.1.0%40enhanced-resolve/lib/Resolver.js#L136">resolve</a></td>
</tr>
<tr>
<td style="text-align:left">userRequest</td>
<td style="text-align:left">得到包括loader在内的资源文件的绝对路径用!拼起来的字符串</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/NormalModuleFactory.js#L254-L259">userRequest</a></td>
</tr>
<tr>
<td style="text-align:left">ruleSet.exec</td>
<td style="text-align:left">它可以根据模块路径名，匹配出模块所需的loader</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/NormalModuleFactory.js#L270-L279">this.ruleSet.exec</a></td>
</tr>
<tr>
<td style="text-align:left">_run</td>
<td style="text-align:left">它可以根据模块路径名，匹配出模块所需的loader</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/RuleSet.js#L485-L558">_run</a></td>
</tr>
<tr>
<td style="text-align:left">loaders</td>
<td style="text-align:left">得到所有的loader数组</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/NormalModuleFactory.js#L338">results[0].concat(loaders, results[1], results[2])</a></td>
</tr>
<tr>
<td style="text-align:left">getParser</td>
<td style="text-align:left">获取AST解析器</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/NormalModuleFactory.js#L357">this.getParser(type, settings.parser)</a></td>
</tr>
<tr>
<td style="text-align:left">buildModule</td>
<td style="text-align:left">开始编译模块</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compilation.js#L996-L1009">this.buildModule(module</a><br><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compilation.js#L602-L656">buildModule(module, optional, origin, dependencies, thisCallback)</a></td>
</tr>
<tr>
<td style="text-align:left">build</td>
<td style="text-align:left">开始真正编译入口模块</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/NormalModule.js#L396-L469">build(options</a></td>
</tr>
<tr>
<td style="text-align:left">doBuild</td>
<td style="text-align:left">开始真正编译入口模块</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/NormalModule.js#L257-L330">doBuild</a></td>
</tr>
<tr>
<td style="text-align:left">执行loader</td>
<td style="text-align:left">使用loader进行转换</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/NormalModule.js#L265">runLoaders</a><br><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_loader-runner%402.3.1%40loader-runner/lib/LoaderRunner.js#L242">runLoaders</a></td>
</tr>
<tr>
<td style="text-align:left">iteratePitchingLoaders</td>
<td style="text-align:left">开始递归执行pitch loader</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_loader-runner%402.3.1%40loader-runner/lib/LoaderRunner.js#L362">iteratePitchingLoaders</a></td>
</tr>
<tr>
<td style="text-align:left">loadLoader</td>
<td style="text-align:left">加载loader</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_loader-runner%402.3.1%40loader-runner/lib/loadLoader.js#L13">loadLoader</a></td>
</tr>
<tr>
<td style="text-align:left">runSyncOrAsync</td>
<td style="text-align:left">执行pitchLoader</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_loader-runner%402.3.1%40loader-runner/lib/LoaderRunner.js#L175-L188">runSyncOrAsync</a></td>
</tr>
<tr>
<td style="text-align:left">processResource</td>
<td style="text-align:left">开始处理资源</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_loader-runner%402.3.1%40loader-runner/lib/LoaderRunner.js#L192">processResource</a><br><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_loader-runner%402.3.1%40loader-runner/lib/LoaderRunner.js#L199">options.readResource</a><br><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_loader-runner%402.3.1%40loader-runner/lib/LoaderRunner.js#L202">iterateNormalLoaders</a><br><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_loader-runner%402.3.1%40loader-runner/lib/LoaderRunner.js#L209-L235">iterateNormalLoaders</a></td>
</tr>
<tr>
<td style="text-align:left">createSource</td>
<td style="text-align:left">创建源代码对象</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/NormalModule.js#L316"> this.createSource</a></td>
</tr>
<tr>
<td style="text-align:left">parse</td>
<td style="text-align:left">使用parser转换抽象语法树</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/NormalModule.js#L445-L467">this.parser.parse</a></td>
</tr>
<tr>
<td style="text-align:left">parse</td>
<td style="text-align:left">解析抽象语法树</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Parser.js#2022">parse(source, initialState)</a></td>
</tr>
<tr>
<td style="text-align:left">acorn.parse</td>
<td style="text-align:left">解析语法树</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Parser.js#L2158">acorn.parse(code, parserOptions)</a></td>
</tr>
<tr>
<td style="text-align:left">ImportDependency</td>
<td style="text-align:left">遍历并添加添加依赖</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/dependencies/HarmonyImportDependencyParserPlugin.js#L28">parser.state.module.addDependency(clearDep)</a></td>
</tr>
<tr>
<td style="text-align:left">succeedModule</td>
<td style="text-align:left">生成语法树后就表示一个模块编译完成</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compilation.js#L652">this.hooks.succeedModule.call(module)</a></td>
</tr>
<tr>
<td style="text-align:left">processModuleDependencies</td>
<td style="text-align:left">递归编译依赖的模块</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compilation.js#L980">this.processModuleDependencies(module</a><br><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compilation.js#L663">processModuleDependencies(module, callback)</a><br><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compilation.js#L716">this.addModuleDependencies</a><br><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compilation.js#L859">buildModule</a></td>
</tr>
<tr>
<td style="text-align:left">make后</td>
<td style="text-align:left">结束make</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compiler.js#L545">this.hooks.make.callAsync(compilation, err =&gt; {}</a></td>
</tr>
<tr>
<td style="text-align:left">finish</td>
<td style="text-align:left">编译完成</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compiler.js#L547">compilation.finish();</a></td>
</tr>
</tbody>
</table>
<h3 id="t196.3 结束阶段">6.3 结束阶段 <a href="#t196.3 结束阶段"> # </a></h3>
<table>
<thead>
<tr>
<th style="text-align:left">事件名</th>
<th style="text-align:left">解释</th>
<th style="text-align:left">代码位置</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">seal</td>
<td style="text-align:left">封装</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compiler.js#L549">compilation.seal</a><br><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compilation.js#L1159-L1301">seal(callback)</a></td>
</tr>
<tr>
<td style="text-align:left">addChunk</td>
<td style="text-align:left">生成资源</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compilation.js#L1400">addChunk(name)</a></td>
</tr>
<tr>
<td style="text-align:left">createChunkAssets</td>
<td style="text-align:left">创建资源</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compilation.js#L1270">this.createChunkAssets()</a></td>
</tr>
<tr>
<td style="text-align:left">getRenderManifest</td>
<td style="text-align:left">获得要渲染的描述文件</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/MainTemplate.js#L355-L360">getRenderManifest(options)</a></td>
</tr>
<tr>
<td style="text-align:left">render</td>
<td style="text-align:left">渲染源码</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compilation.js#L2369">source = fileManifest.render();</a></td>
</tr>
<tr>
<td style="text-align:left">afterCompile</td>
<td style="text-align:left">编译结束</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compiler.js##L552">this.hooks.afterCompile</a></td>
</tr>
<tr>
<td style="text-align:left">shouldEmit</td>
<td style="text-align:left">所有需要输出的文件已经生成好，询问插件哪些文件需要输出，哪些不需要。</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compiler.js##L215">this.hooks.shouldEmit</a></td>
</tr>
<tr>
<td style="text-align:left">emit</td>
<td style="text-align:left">确定好要输出哪些文件后，执行文件输出，可以在这里获取和修改输出内容。</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compiler.js##L228">this.emitAssets(compilation</a><br><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compiler.js##L363-L367">this.hooks.emit.callAsync</a><br><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compiler.js##L308-L361">const emitFiles = err</a><br><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compiler.js##L338">this.outputFileSystem.writeFile</a></td>
</tr>
<tr>
<td style="text-align:left">this.emitRecords</td>
<td style="text-align:left">写入记录</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compiler.js##L249">this.emitRecords</a></td>
</tr>
<tr>
<td style="text-align:left">done</td>
<td style="text-align:left">全部完成</td>
<td style="text-align:left"><a href="https://github.com/zhufengnodejs/webpack-analysis/blob/master/node_modules/_webpack%404.20.2%40webpack/lib/Compiler.js##L255">this.hooks.done.callAsync</a></td>
</tr>
</tbody>
</table>
<p><img src="http://img.zhufengpeixun.cn/dependency.jpg" alt="dependency"></p>
<h2 id="t207. 参考">7. 参考 <a href="#t207. 参考"> # </a></h2>
<ul>
<li><a href="https://github.com/zhufengnodejs/webpack-analysis">webpack-analysis</a></li>
<li><a href="https://alienzhou.github.io/webpack-internal-plugin-relation/">webpack-internal-plugin-relation</a></li>
</ul>

    